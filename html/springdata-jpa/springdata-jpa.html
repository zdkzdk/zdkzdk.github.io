<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="generator" content="Aspose.Words for .NET 15.1.0.0" /><title></title></head><body><div><h1 style="margin:12pt 0pt 0pt 35.4pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="display:inline; font-family:宋体; font-size:14pt; font-style:normal; font-variant:normal; font-weight:bold; text-decoration:none; text-transform:none; vertical-align:baseline">一、</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0; </span><span style="font-family:'等线 Light'; font-size:14pt; font-weight:bold">spring-data-jpa</span></h1><h2 style="margin:0pt 0pt 6pt 14.15pt; text-indent:0pt"><span style="font-family:等线; font-size:14pt; font-style:normal">1.</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">src</span></h2><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">overview</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.1.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">Spring Data</span><span style="font-family:宋体; font-size:11pt">是</span><span style="font-family:等线; font-size:11pt">spring-based</span><span style="font-family:宋体; font-size:11pt">的持久层框架，下面有</span><span style="font-family:等线; font-size:11pt">10</span><span style="font-family:宋体; font-size:11pt">多个子项目，包括</span><span style="font-family:等线; font-size:11pt">hbase</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">redis</span><span style="font-family:宋体; font-size:11pt">。在跟</span><span style="font-family:等线; font-size:11pt">DB</span><span style="font-family:宋体; font-size:11pt">的交互中，</span><span style="font-family:等线; font-size:11pt">Spring Data JPA</span><span style="font-family:宋体; font-size:11pt">算是除了</span><span style="font-family:等线; font-size:11pt">Mybatis</span><span style="font-family:宋体; font-size:11pt">外最常用的了，很适合</span><span style="font-family:等线; font-size:11pt">EE</span><span style="font-family:宋体; font-size:11pt">的开发场景。</span></h4><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">concept</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.2.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">Spring Data JPA</span><span style="font-family:宋体; font-size:11pt">：</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">实现了</span><span style="font-family:等线; font-size:11pt">JPA</span><span style="font-family:宋体; font-size:11pt">规范的基于</span><span style="font-family:等线; font-size:11pt">Spring</span><span style="font-family:宋体; font-size:11pt">的</span><span style="font-family:等线; font-size:11pt">orm</span><span style="font-family:宋体; font-size:11pt">、持久层框架。使得开发人员可以</span><span style="font-family:宋体; font-size:11pt">基于</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">JPA </span><span style="font-family:宋体; font-size:11pt">的标准对数据进行操作</span><span style="font-family:宋体; font-size:11pt">同时提供了自动生成实现类的功能，</span><span style="font-family:宋体; font-size:11pt">简化操作持久层的代码</span><span style="font-family:宋体; font-size:11pt">，</span><span style="font-family:宋体; font-size:11pt">只需要编</span><span style="font-family:宋体; font-size:11pt">写接口就可以。</span></h4><h2 style="margin:0pt 0pt 6pt 14.15pt; text-indent:0pt"><span style="font-family:等线; font-size:14pt; font-style:normal">2.</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">搭建</span></h2><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">2.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">maven</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">2.1.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">创建项目</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">2.1.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">配置依赖，修改配文</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">加入</span><span style="font-family:等线; font-size:11pt">jpa</span><span style="font-family:宋体; font-size:11pt">的</span><span style="font-family:等线; font-size:11pt">namespace</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">xsd</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">底层依赖</span><span style="font-family:等线; font-size:11pt">HJPA</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">所以要将传统的</span><span style="font-family:等线; font-size:11pt">sessionFactory</span><span style="font-family:宋体; font-size:11pt">换成</span><span style="font-family:等线; font-size:11pt">entityManagerFactory</span><span style="font-family:宋体; font-size:11pt">，并且在</span><span style="font-family:等线; font-size:11pt">entityManagerFactory</span><span style="font-family:宋体; font-size:11pt">中配置实体类扫描</span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:宋体; font-size:11pt">扫描实体类中的</span><span style="font-family:等线; font-size:11pt">orm</span><span style="font-family:宋体; font-size:11pt">注解</span><span style="font-family:等线; font-size:11pt">)</span><span style="font-family:宋体; font-size:11pt">。</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">上面扫的仅仅是实体类的注解，还要在外面</span><span style="font-family:等线; font-size:11pt">&lt;</span><span style="font-family:等线; font-size:11pt">beans&gt;</span><span style="font-family:宋体; font-size:11pt">下扫描</span><span style="font-family:等线; font-size:11pt">spring</span><span style="font-family:宋体; font-size:11pt">的注解，比如</span><span style="font-family:等线; font-size:11pt">@Repositroy@</span><span style="font-family:等线; font-size:11pt">Service</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">扫描接口，</span><span style="font-family:宋体; font-size:11pt">功能类似于</span><span style="font-family:等线; font-size:11pt">MB</span><span style="font-family:宋体; font-size:11pt">的</span><span style="font-family:等线; font-size:11pt">mapperScanner</span><span style="font-family:宋体; font-size:11pt">，用来扫描</span><span style="font-family:等线; font-size:11pt">dao</span><span style="font-family:宋体; font-size:11pt">包然后给接口创建代理类。</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">2.1.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">创建接口，只写接口不写实现类，只需要继承</span><span style="font-family:等线; font-size:11pt">data</span><span style="font-family:宋体; font-size:11pt">提供的接口且会有默认的方法</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">data</span><span style="font-family:宋体; font-size:11pt">提供的方法的方法名没有遵循</span><span style="font-family:等线; font-size:11pt">jpa</span><span style="font-family:宋体; font-size:11pt">标准，但里面封装了</span><span style="font-family:等线; font-size:11pt">jpa</span><span style="font-family:宋体; font-size:11pt">的方法</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">c</span><span style="font-family:等线; font-size:11pt">   </span><span style="font-family:宋体; font-size:11pt">用的是</span><span style="font-family:等线; font-size:11pt">save</span></h6><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">2.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">sboot</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">2.2.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">pom</span><span style="font-family:宋体; font-size:11pt">依赖</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">jpa</span><span style="font-family:宋体; font-size:11pt">的启动器</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:512pt"><p style="line-height:12pt; margin:0pt"><span style="color:#cccccc; font-family:等线; font-size:12pt">&lt;</span><span style="font-family:等线; font-size:12pt">dependency</span><span style="color:#cccccc; font-family:等线; font-size:12pt">&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#cccccc; font-family:等线; font-size:12pt">    &lt;</span><span style="font-family:等线; font-size:12pt">groupId</span><span style="color:#cccccc; font-family:等线; font-size:12pt">&gt;org.springframework.boot&lt;/</span><span style="font-family:等线; font-size:12pt">groupId</span><span style="color:#cccccc; font-family:等线; font-size:12pt">&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#cccccc; font-family:等线; font-size:12pt">    &lt;</span><span style="font-family:等线; font-size:12pt">artifactId</span><span style="color:#cccccc; font-family:等线; font-size:12pt">&gt;spring-boot-starter-data-jpa&lt;/</span><span style="font-family:等线; font-size:12pt">artifactId</span><span style="color:#cccccc; font-family:等线; font-size:12pt">&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#cccccc; font-family:等线; font-size:12pt">&lt;/</span><span style="font-family:等线; font-size:12pt">dependency</span><span style="color:#cccccc; font-family:等线; font-size:12pt">&gt;</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">thymeleaf</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">mysql</span><span style="font-family:宋体; font-size:11pt">驱动、</span><span style="font-family:等线; font-size:11pt">druid</span><span style="font-family:宋体; font-size:11pt">连接池、</span><span style="font-family:等线; font-size:11pt">web</span><span style="font-family:宋体; font-size:11pt">启动器、</span><span style="font-family:等线; font-size:11pt">test</span><span style="font-family:宋体; font-size:11pt">启动器</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">2.2.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">application</span><span style="font-family:等线; font-size:11pt">.properties</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">properties</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:70.5pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:498.2pt"><p style="background-color:#c9efcb; line-height:12pt; margin:0pt"><span style="color:#000080; font-family:Consolas; font-size:12pt; font-weight:bold">spring.datasource.driverClassName</span><span style="font-family:Consolas; font-size:12pt">=</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">com</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">.</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">mysql</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">.</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">jdbc</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">.</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">Driver</span><br /><span style="color:#000080; font-family:Consolas; font-size:12pt; font-weight:bold">spring.datasource.url</span><span style="font-family:Consolas; font-size:12pt">=</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">jdbc:mysql://localhost:3306/ssm</span><br /><span style="color:#000080; font-family:Consolas; font-size:12pt; font-weight:bold">spring.datasource.username</span><span style="font-family:Consolas; font-size:12pt">=</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">root</span><br /><span style="color:#000080; font-family:Consolas; font-size:12pt; font-weight:bold">spring.datasource.password</span><span style="font-family:Consolas; font-size:12pt">=</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">root</span><br /><span style="color:#000080; font-family:Consolas; font-size:12pt; font-weight:bold">spring.datasource.type</span><span style="font-family:Consolas; font-size:12pt">=</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">com</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">.</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">alibaba</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">.</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">druid</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">.</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">pool</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">.</span><span style="color:#e15a61; font-family:Consolas; font-size:12pt; font-weight:bold">DruidDataSource</span><br /><span style="color:#000080; font-family:Consolas; font-size:12pt; font-weight:bold">spring.jpa.hibernate.ddl-auto</span><span style="font-family:Consolas; font-size:12pt">=</span><span style="color:#008000; font-family:Consolas; font-size:12pt; font-weight:bold">update</span><br /><span style="color:#000080; font-family:Consolas; font-size:12pt; font-weight:bold">spring.jpa.show-sql</span><span style="font-family:Consolas; font-size:12pt">=</span><span style="color:#000080; font-family:Consolas; font-size:12pt; font-weight:bold">true</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">yml</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:70.9pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:647.95pt"><p style="background-color:#c9efcb; line-height:11pt; margin:0pt"><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">server</span><span style="font-family:Consolas; font-size:11pt">:</span><br /><span style="font-family:Consolas; font-size:11pt">  </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">port</span><span style="font-family:Consolas; font-size:11pt">: </span><span style="color:#0000ff; font-family:Consolas; font-size:11pt">8080</span><br /><span style="color:#0000ff; font-family:Consolas; font-size:11pt">  </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">servlet</span><span style="font-family:Consolas; font-size:11pt">:</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">context-path</span><span style="font-family:Consolas; font-size:11pt">: /</span><br /><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">spring</span><span style="font-family:Consolas; font-size:11pt">:</span><br /><span style="font-family:Consolas; font-size:11pt">  </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">datasource</span><span style="font-family:Consolas; font-size:11pt">:</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">url</span><span style="font-family:Consolas; font-size:11pt">: jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=UTC</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">username</span><span style="font-family:Consolas; font-size:11pt">: root</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">password</span><span style="font-family:Consolas; font-size:11pt">: root</span><br /><span style="font-family:Consolas; font-size:11pt">  </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">jpa</span><span style="font-family:Consolas; font-size:11pt">:</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">database</span><span style="font-family:Consolas; font-size:11pt">: </span><span style="color:#660e7a; font-family:Consolas; font-size:11pt; font-style:italic">MySQL</span><br /><span style="color:#660e7a; font-family:Consolas; font-size:11pt; font-style:italic">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">database-platform</span><span style="font-family:Consolas; font-size:11pt">: org.hibernate.dialect.MySQL5InnoDBDialect</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">show-sql</span><span style="font-family:Consolas; font-size:11pt">: </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">true</span><br /><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">    hibernate</span><span style="font-family:Consolas; font-size:11pt">:</span><br /><span style="font-family:Consolas; font-size:11pt">      </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">ddl-auto</span><span style="font-family:Consolas; font-size:11pt">: update</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">ddl-auto</span></h5><h6 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">create</span><span style="font-family:宋体; font-size:11pt">：每次运行程序时，都会重新创建表，故而数据会丢失</span></h6><h6 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">create-drop</span><span style="font-family:宋体; font-size:11pt">：每次运行程序时会先创建表结构，然后待程序结束时清空表</span></h6><h6 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">upadte</span><span style="font-family:宋体; font-size:11pt">：每次运行程序，没有表时会创建表，如果对象发生改变会更新表结构，原有数据不会清空，只会更新（推荐使用）</span></h6><h6 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">validate</span><span style="font-family:宋体; font-size:11pt">：运行程序会校验数据与数据库的字段类型是否相同，字段不同会报错</span></h6><h6 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[5]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">none: </span><span style="font-family:宋体; font-size:11pt">禁用</span><span style="font-family:等线; font-size:11pt">DDL</span><span style="font-family:宋体; font-size:11pt">处理</span></h6><h2 style="margin:0pt 0pt 6pt 14.15pt; text-indent:0pt"><span style="font-family:等线; font-size:14pt; font-style:normal">3.</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">ORM</span></h2><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">3.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">实体类</span></h3><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:63pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:512pt"><p style="background-color:#c9efcb; line-height:11pt; margin:0pt"><span style="color:#808000; font-family:Consolas; font-size:11pt">@Entity</span><br /><a name="_Hlk22739529"><span style="color:#808000; font-family:Consolas; font-size:11pt">@Table</span><span style="font-family:Consolas; font-size:11pt">(name = </span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold">"student"</span><span style="font-family:Consolas; font-size:11pt">)</span></a><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Data</span><br /><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">public class </span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Student </span><span style="font-family:Consolas; font-size:11pt">{</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#808000; font-family:Consolas; font-size:11pt">@Id</span><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">private int </span><span style="color:#660e7a; font-family:Consolas; font-size:11pt; font-weight:bold">sno</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">private </span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="color:#660e7a; font-family:Consolas; font-size:11pt; font-weight:bold">sname</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">private </span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="color:#660e7a; font-family:Consolas; font-size:11pt; font-weight:bold">ssex</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">private </span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="color:#660e7a; font-family:Consolas; font-size:11pt; font-weight:bold">sbirthday</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">private </span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="color:#660e7a; font-family:Consolas; font-size:11pt; font-weight:bold">sclass</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="font-family:Consolas; font-size:11pt">}</span></p></td></tr></table><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.1.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">@Entity</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">@Table(name = "student")</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.1.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">@Id</span><span style="font-family:宋体; font-size:11pt">必须</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.1.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">@column</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">如果属性名和列名不同，要用</span><span style="font-family:等线; font-size:11pt">column</span><span style="font-family:宋体; font-size:11pt">修正</span></h5><p style="line-height:14pt; margin:7.8pt 0pt 7.8pt 7.35pt; text-indent:21pt"><span style="font-family:等线; font-size:14pt">关联查询：关联关系的建立</span></p><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">3.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">oto</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.2.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">一对一按单双向、主外键关联有</span><span style="font-family:等线; font-size:11pt">4</span><span style="font-family:宋体; font-size:11pt">种</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.2.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在</span><span style="font-family:等线; font-size:11pt">entity</span><span style="font-family:宋体; font-size:11pt">中通过注解建立双向主键一对一映射关系</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在双方类中建立关联属性，可以不建外键属性，只建关联的引用属性。</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在维护方</span><span style="font-family:等线; font-size:11pt">@OneToOne</span><span style="font-family:等线; font-size:11pt">  </span><span style="font-family:等线; font-size:11pt">+</span><span style="font-family:等线; font-size:11pt">  </span><span style="font-family:等线; font-size:11pt">@JoinColumn</span><span style="font-family:等线; font-size:11pt">(name=’</span><span style="font-family:宋体; font-size:11pt">外键名</span><span style="font-family:等线; font-size:11pt">’)</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在被维护方</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">@OneToOne</span><span style="font-family:等线; font-size:11pt">(mapedBy=”</span><span style="font-family:宋体; font-size:11pt">维护方关联属性名</span><span style="font-family:等线; font-size:11pt">”)</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">一对一的维护方和被维护方由业务决定</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{5}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">关联属性上不需要再加</span><span style="font-family:等线; font-size:11pt">@Column</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.2.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">usage</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">配置关联关系</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:63pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:53.4pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="color:#646464; font-family:等线; font-size:11pt">被维护方</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:980.95pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="color:#646464; font-family:Consolas; font-size:11pt">@Entity</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@Table</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"t_roles"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public class </span><span style="font-family:Consolas; font-size:11pt">Roles {</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@Id</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@GeneratedValue</span><span style="font-family:Consolas; font-size:11pt">(strategy=GenerationType.</span><span style="color:#0000c0; font-family:Consolas-BoldItalic; font-size:11pt; font-style:italic; font-weight:bold">IDENTITY</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@Column</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"roleid"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">private </span><span style="font-family:Consolas; font-size:11pt">Integer </span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">roleid</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@Column</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"rolename"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">private </span><span style="font-family:Consolas; font-size:11pt">String </span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">rolename</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@OneToOne</span><span style="font-family:Consolas; font-size:11pt">(mappedBy=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"roles"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">private </span><span style="font-family:Consolas; font-size:11pt">Users </span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">users</span><span style="font-family:Consolas; font-size:11pt">;</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:53.4pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="color:#646464; font-family:等线; font-size:11pt">维护方</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:980.95pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="color:#646464; font-family:Consolas; font-size:11pt">@Entity</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@Table</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"t_users"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public class </span><span style="font-family:Consolas; font-size:11pt">Users </span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">implements </span><span style="font-family:Consolas; font-size:11pt">Serializable{</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@Id</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@GeneratedValue</span><span style="font-family:Consolas; font-size:11pt">(strategy=GenerationType.</span><span style="color:#0000c0; font-family:Consolas-BoldItalic; font-size:11pt; font-style:italic; font-weight:bold">IDENTITY</span><span style="font-family:Consolas; font-size:11pt">)</span><span style="color:#3f7f5f; font-family:Consolas; font-size:11pt">//strategy=GenerationType.IDENTITY </span><span style="color:#3f7f5f; font-family:宋体; font-size:11pt">自增长</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@Column</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"userid"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">private </span><span style="font-family:Consolas; font-size:11pt">Integer </span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">userid</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@</span><a name="_Hlk10811894"><span style="color:#646464; font-family:Consolas; font-size:11pt">OneToOne</span></a><br /><span style="color:#3f7f5f; font-family:Consolas; font-size:11pt">//@JoinColumn</span><span style="color:#3f7f5f; font-family:宋体; font-size:11pt">： 就是维护一个外键</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@JoinColumn</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"roles_id"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">private </span><span style="font-family:Consolas; font-size:11pt">Roles </span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">roles</span><span style="font-family:Consolas; font-size:11pt">;</span></p></td></tr></table><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">级联操作：</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">在维护放种的@</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt"> OneToOne</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">中设置Cascade枚举属性 </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">.PERSI</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">S</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">T</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">表示添加的时候级联添加</span></p><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">3.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">otm</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.3.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">多对一中，一般由多方维护。只能由多方级联添加一方，反向添加不可。</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.3.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hibernate</span><span style="font-family:宋体; font-size:11pt">中建立关联关系分</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">步</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">设置关联属性</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在关联属性上通过注解来建立映射关系，这个映射关系包括：</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">关联关系的类型</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">多方：@MTO</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">  </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">一方：@OTM</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">维护方</span><span style="font-family:等线; font-size:11pt">/</span><span style="font-family:宋体; font-size:11pt">非维护方</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">：</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">mappedBy</span><span style="font-family:宋体; font-size:11pt">。多对一中，维护方只能是多方，只有</span><span style="font-family:等线; font-size:11pt">@OTM</span><span style="font-family:宋体; font-size:11pt">才有</span><span style="font-family:等线; font-size:11pt">mappedBy</span><span style="font-family:宋体; font-size:11pt">属性</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">在维护方设置级联操作范围</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">单向</span><span style="font-family:等线; font-size:11pt">/</span><span style="font-family:宋体; font-size:11pt">双向</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[5]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">外键的名字</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">：</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">@JoinColumn</span><span style="font-family:等线; font-size:11pt">(name=”</span><span style="font-family:宋体; font-size:11pt">外键的列名</span><span style="font-family:等线; font-size:11pt">”)   </span><span style="font-family:等线; font-size:11pt">hibernate</span><span style="font-family:宋体; font-size:11pt">要在多方的表中增加一列的列名，</span><span style="font-family:等线; font-size:11pt">j</span><span style="font-family:等线; font-size:11pt">oinColumn</span><span style="font-family:宋体; font-size:11pt">的意思就是增加列</span></h6><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.3.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">usage</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">创建类，创建关联属性，正向工程</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">设置对象间关联。</span><span style="font-family:宋体; font-size:11pt"> </span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">对维护方执行操作</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">非维护方执行操作不可级联操作到维护方，结果只会</span><span style="font-family:等线; font-size:11pt">affect</span><span style="font-family:宋体; font-size:11pt">到非维护方，维护方无变化且不会报错。</span></h6><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">3.4</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">mtm</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.4.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">配置</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.4.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">coding</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">创建对象</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">建立关系</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">执行</span></h5><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:112pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.001.png" width="701" height="92" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">执行顺序先插入双方再插入中间表</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">查询</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">查询默认用的是</span><span style="font-family:等线; font-size:11pt">n</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">+</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">1</span><span style="font-family:宋体; font-size:11pt">的方式，也就是说要执行多条</span><span style="font-family:等线; font-size:11pt">sql</span><span style="font-family:宋体; font-size:11pt">，而如</span><span style="font-family:等线; font-size:11pt">H</span><span style="font-family:宋体; font-size:11pt">默认使用懒加载方式，执行完第一条就会关闭</span><span style="font-family:等线; font-size:11pt">session</span><span style="font-family:宋体; font-size:11pt">，所以需要在维护方的</span><span style="font-family:等线; font-size:11pt">@MTM</span><span style="font-family:宋体; font-size:11pt">中加入</span><span style="font-family:等线; font-size:11pt">fetch=ERGER</span></h6><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">3.5</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">hibernate</span><span style="font-family:宋体; font-size:11pt; font-weight:bold">配置关联关系总结</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.5.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">每种关联关系都会有维护方</span></h4><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:42pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:60.2pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">&#xa0;</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:364.85pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@Entity</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@Table</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@Column</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@Id</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@GeneratedValue(strategy=GenerationType.IDENTITY)</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:336.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">&#xa0;</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:60.2pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">OTO</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:364.85pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="color:#646464; font-family:Consolas; font-size:11pt">@OneToOne</span><br /><span style="color:#3f7f5f; font-family:Consolas; font-size:11pt">//@JoinColumn</span><span style="color:#3f7f5f; font-family:宋体; font-size:11pt">： 就是维护一个外键</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@JoinColumn</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"roles_id"</span><span style="font-family:Consolas; font-size:11pt">)</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><br /><span style="font-family:等线; font-size:11pt">@OneToOne</span><span style="font-family:等线; font-size:11pt">(mapedBy=”</span><span style="font-family:等线; font-size:11pt">维护方关联属性名</span><span style="font-family:等线; font-size:11pt">”)</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:336.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">OTO的维护方也需要增加一个外键列</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:60.2pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">OTM</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:364.85pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@MTO</span><span style="font-family:等线; font-size:11pt">  </span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">维护方必须是多方</span><span style="font-family:等线; font-size:11pt">，</span><span style="font-family:等线; font-size:11pt">在维护方设置级联操作范围</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@JoinColumn</span><span style="font-family:等线; font-size:11pt">(name=”</span><span style="font-family:等线; font-size:11pt">外键的列名</span><span style="font-family:等线; font-size:11pt">”)</span><span style="font-family:等线; font-size:11pt">是多方表中的代表一方的外键</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@OTM</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">mappedBy</span><span style="font-family:等线; font-size:11pt">的值是多方实体类中的代表一方的属性</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:336.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">，只有@OTM才有mappedBy属性</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:60.2pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">MTM</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:364.85pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">维护方：</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@MTM  </span><span style="font-family:等线; font-size:11pt">如果开启级联操作，要在维护方开(</span><span style="font-family:等线; font-size:11pt">cascade=CascaseType.PERSIST)</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 70pt"><span style="font-family:等线; font-size:11pt">hibernate默认延迟加载</span><span style="font-family:Wingdings; font-size:11pt"></span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">多对多关联查询时，多执行多条sql语句，还没执行完session就关闭了。可以配置长session，或者在维护方@MTM中配置fetch=FetchType</span><span style="font-family:等线; font-size:11pt">.EAGER </span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="color:#646464; font-family:Consolas; font-size:11pt">@JoinTable</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"t_roles_menus"</span><span style="font-family:Consolas; font-size:11pt">,</span><br /><span style="font-family:Consolas; font-size:11pt">joinColumns=</span><span style="color:#646464; font-family:Consolas; font-size:11pt">@JoinColumn</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"role_id"</span><span style="font-family:Consolas; font-size:11pt">),</span><br /><span style="font-family:Consolas; font-size:11pt">inverseJoinColumns=</span><span style="color:#646464; font-family:Consolas; font-size:11pt">@JoinColumn</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"menu_id"</span><span style="font-family:Consolas; font-size:11pt">))</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">非维护方：</span></p><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">@ManyToMany(mappedBy="menus")</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:336.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:Consolas; font-size:11pt">inverseJoinColumns</span><span style="font-family:等线; font-size:11pt">是维护方的列名，</span><span style="font-family:Consolas; font-size:11pt">joinColumns</span><span style="font-family:等线; font-size:11pt">是中间表对应的列名。</span><span style="color:#ff0000; font-family:等线; font-size:11pt">不需要设置非维护方的列名。</span></p></td></tr></table><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">3.5.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><a name="_Hlk13150995"><span style="font-family:等线; font-size:11pt">web</span><span style="font-family:宋体; font-size:11pt">容器启动时，会自动先去创建相关的表和外键，而多对一外键关联中，多方的外键必须和参考表的主键类型长度一致，否则会报错</span></a></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">数据库是不可能出现</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">个相同的表，表明一定有地方不同</span></h5><h2 style="margin:0pt 0pt 6pt 14.15pt; text-indent:0pt"><span style="font-family:等线; font-size:14pt; font-style:normal">4.</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="-aw-bookmark-end:_Hlk13150995"></span><span style="font-family:宋体; font-size:11pt; font-weight:bold">运行原理</span><span style="font-family:宋体; font-size:11pt; font-weight:bold"> </span><span style="font-family:宋体; font-size:11pt; font-weight:bold"> </span><span style="font-family:等线; font-size:11pt; font-weight:bold">--------    </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">为什么只继承接口即可，不需写实现</span></h2><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">4.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">继承结构</span></h3><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:84pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.002.png" width="620" height="288" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.003.png" width="647" height="301" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">4.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">Repository</span><span style="font-family:宋体; font-size:11pt; font-weight:bold">接口</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.2.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">是</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">Spring Data JPA</span><span style="font-family:宋体; font-size:11pt">提供的所有接口中的顶层接口</span><span style="font-family:宋体; font-size:11pt">，是空接口、标记接口。</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">标记什么？会根据自定义的子接口中的方法的方法名自动在代理对象中创建对应方法</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">基于</span><span style="font-family:宋体; font-size:11pt">特定规范的</span><span style="font-family:宋体; font-size:11pt">方法名查询</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">规则：</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">findBy(</span><span style="font-family:宋体; font-size:11pt">关键字</span><span style="font-family:等线; font-size:11pt">) + </span><span style="font-family:宋体; font-size:11pt">属性名称</span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:宋体; font-size:11pt">属性名称的首字母大写</span><span style="font-family:等线; font-size:11pt">) + </span><span style="font-family:宋体; font-size:11pt">查询条件</span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:宋体; font-size:11pt">比较规则</span><span style="font-family:等线; font-size:11pt">)(</span><span style="font-family:宋体; font-size:11pt">首字母大写</span><span style="font-family:等线; font-size:11pt">)</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">命名规范不是驼峰规则，而仅仅是首字母，比如username，要设置为Username</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">查询条件指的是就是比较规则，比如大于、相等</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">相等 ： 什么都不写、默认，Is，Equal</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(4)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">多条件：And</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">返回值类型就是方法的返回值类型</span></h6><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:105.95pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">关键字 </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">方法命名 </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">sql where 字句</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">And </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByNameAndPwd </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where name= ? and pwd =?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">Or </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByNameOrSex </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where name= ? or sex=?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">Is,Equal</span><span style="font-family:等线; font-size:10.5pt">,默认</span><span style="font-family:等线; font-size:10.5pt"> </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findById,findByIdEquals</span><span style="font-family:等线; font-size:10.5pt">,</span><span style="font-family:等线; font-size:10.5pt">findById </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where id= ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">Between </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByIdBetween </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where id between ? and ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">LessThan </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByIdLessThan </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where id &lt; ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">LessThanEqual </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByIdLessThanEquals</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where id &lt;= ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">GreaterThan </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByIdGreaterThan </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where id &gt; ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">GreaterThanEqual</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByIdGreaterThanEquals </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where id &gt; = ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">After </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByIdAfter </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where id &gt; ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">Before </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByIdBefore </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where id &lt; ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">IsNull </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByNameIsNull </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where name is null</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">isNotNull,NotNull  </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">findByNameNotNull </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="font-family:等线; font-size:10.5pt">where name is not null</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">Like </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByNameLike </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where name like ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">NotLike </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByNameNotLike </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where name not like ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">StartingWith </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByNameStartingWith </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where name like '?%'</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">EndingWith </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByNameEndingWith </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where name like '%?'</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">Containing </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByNameContaining </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where name like '%?%'</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">OrderBy </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByIdOrderByXDesc </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where id=? order by x desc</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">Not </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByNameNot </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where name &lt;&gt; ?</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">In </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByIdIn(Collection&lt;?&gt; c) </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where id in (?)</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">NotIn </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByIdNotIn(Collection&lt;?&gt; c)</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where id not in (?)</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">True </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByAaaTue </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where aaa = true</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">False </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByAaaFalse </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where aaa = false</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:116.75pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">IgnoreCase </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:237.25pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">findByNameIgnoreCase </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:middle; width:223.1pt"><p style="line-height:10.5pt; margin:0pt"><span style="color:#4f4f4f; font-family:等线; font-size:10.5pt">where UPPER(name)=UPPER(?)</span></p></td></tr></table><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">缺点</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">如果条件多，会导致方法名很长</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">summary</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">声明式dao实现类编写，通过设置方法名的规范来为springDataJpa自动生成的代理类中生成的方法提供信息</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">基于</span><span style="font-family:等线; font-size:11pt">@Query </span><span style="font-family:宋体; font-size:11pt">注解查询</span></h5><p style="line-height:14pt; margin:7.8pt 0pt 7.8pt 70.9pt"><span style="font-family:等线; font-size:14pt">2种方式</span></p><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:70.9pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:718.8pt"><p style="background-color:#c9efcb; line-height:11pt; margin:0pt"><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">//</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">方法名称命名规则</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; findByUsernameIs(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">string);</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; findByUsernameLike(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">string);</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; findByUsernameAndUserageGreaterThanEqual(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">name,</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Integer </span><span style="font-family:Consolas; font-size:11pt">age);</span><br /><br /><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">//</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">使用</span><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">@Query</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">注解查询</span><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Query</span><span style="font-family:Consolas; font-size:11pt">(value=</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold">"from Users where username = ?"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; queryUserByNameUseJPQL(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">name);</span><br /><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Query</span><span style="font-family:Consolas; font-size:11pt">(</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold">"from Users where username like ?"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; queryUserByLikeNameUseJPQL(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">name);</span><br /><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Query</span><span style="font-family:Consolas; font-size:11pt">(</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold">"from Users where username = ? and userage &gt;= ?"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; queryUserByNameAndAge(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">name,</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Integer </span><span style="font-family:Consolas; font-size:11pt">age);</span><br /><br /><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">//</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">使用</span><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">@Query</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">注解查询</span><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">SQL</span><br /><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">//nativeQuery:</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">默认的是</span><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">false.</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">表示不开启</span><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">sql</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">查询。是否对</span><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">value</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">中的语句做转义。</span><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Query</span><span style="font-family:Consolas; font-size:11pt">(value=</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold">"select </span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-style:italic">*</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold"> from t_users where username = ?"</span><span style="font-family:Consolas; font-size:11pt">,nativeQuery=</span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">true</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; queryUserByNameUseSQL(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">name);</span><br /><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Query</span><span style="font-family:Consolas; font-size:11pt">(value=</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold">"select </span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-style:italic">*</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold"> from t_users where username like ?"</span><span style="font-family:Consolas; font-size:11pt">,nativeQuery=</span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">true</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; queryUserByLikeNameUseSQL(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">name);</span><br /><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Query</span><span style="font-family:Consolas; font-size:11pt">(value=</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold">"select </span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-style:italic">*</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold"> from t_users where username = ? and userage &gt;= ?"</span><span style="font-family:Consolas; font-size:11pt">,nativeQuery=</span><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">true</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#e15a61; font-family:Consolas; font-size:11pt">List</span><span style="font-family:Consolas; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Users</span><span style="font-family:Consolas; font-size:11pt">&gt; queryUserByNameAndAgeUseSQL(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">String </span><span style="font-family:Consolas; font-size:11pt">name,</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Integer </span><span style="font-family:Consolas; font-size:11pt">age);</span><br /><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Query</span><span style="font-family:Consolas; font-size:11pt">(</span><span style="color:#008000; font-family:Consolas; font-size:11pt; font-weight:bold">"update Users set userage = ? where userid = ?"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#808000; font-family:Consolas; font-size:11pt">@Modifying</span><span style="color:#808080; font-family:Consolas; font-size:11pt; font-style:italic">//@Modifying</span><span style="color:#808080; font-family:宋体; font-size:11pt; font-style:italic">当前语句是一个更新语句</span><br /><span style="color:#000080; font-family:Consolas; font-size:11pt; font-weight:bold">void </span><span style="font-family:Consolas; font-size:11pt">updateUserAgeById(</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Integer </span><span style="font-family:Consolas; font-size:11pt">age,</span><span style="color:#e15a61; font-family:Consolas; font-size:11pt; font-weight:bold">Integer </span><span style="font-family:Consolas; font-size:11pt">id);</span></p></td></tr></table><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">JPQL</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Hibernate 的 HQL 演变过来的。和 HQL 语法及其相似</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">sql</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">nativeQuery必须设为true，默认false。</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">这个属性的意思就是是否进行HQL转SQL，如果为true，不转，直接执行，false，按HQL转SQL先转了再执行。</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">如果是更新，要加</span><span style="font-family:等线; font-size:11pt">@Modifying</span><span style="font-family:宋体; font-size:11pt">注解</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">DataJPA</span><span style="font-family:宋体; font-size:11pt">中，</span><span style="font-family:等线; font-size:11pt">cud</span><span style="font-family:宋体; font-size:11pt">必须添加到事务中</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">=</span><span style="font-family:Wingdings; font-size:11pt"></span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">必须使用</span><span style="font-family:等线; font-size:11pt">@Transcational</span><span style="font-family:宋体; font-size:11pt">，如果在</span><span style="font-family:等线; font-size:11pt">spring-test</span><span style="font-family:宋体; font-size:11pt">测试类中，还要加</span><span style="font-family:等线; font-size:11pt">@Rollback</span><span style="font-family:等线; font-size:11pt">(false)</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[5]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">summary</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">通过@Query中的value和nativeQuery属性来设置HQL或SQL，参数同方法的参数列表关联</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">@Modfying</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">即使是Query也要加@Transactional，有专门的查询事务</span></p><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">4.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">Crud</span><span style="font-family:等线; font-size:11pt; font-weight:bold">R</span><span style="font-family:等线; font-size:11pt; font-weight:bold">epository</span></h3><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:84pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.004.png" width="358" height="246" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.3.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">提供了</span><span style="font-family:等线; font-size:11pt">CRUD</span><span style="font-family:宋体; font-size:11pt">的方法，</span><span style="font-family:等线; font-size:11pt">SimpleJPARepository</span><span style="font-family:宋体; font-size:11pt">里的</span><span style="font-family:等线; font-size:11pt">save</span><span style="font-family:宋体; font-size:11pt">就是对</span><span style="font-family:等线; font-size:11pt">CrudRepositroy</span><span style="font-family:宋体; font-size:11pt">的实现，</span><span style="font-family:等线; font-size:11pt">save</span><span style="font-family:宋体; font-size:11pt">既可以</span><span style="font-family:等线; font-size:11pt">C</span><span style="font-family:宋体; font-size:11pt">也可以</span><span style="font-family:等线; font-size:11pt">U</span><span style="font-family:宋体; font-size:11pt">，</span><span style="color:#ff0000; font-family:等线; font-size:11pt">CrudRepository</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">的代理对象也代理了</span><span style="color:#ff0000; font-family:等线; font-size:11pt">SimpleJPARepository</span><span style="font-family:宋体; font-size:11pt">，</span><span style="font-family:等线; font-size:11pt">CUD</span><span style="font-family:宋体; font-size:11pt">时自动提交事务，不需要像</span><span style="font-family:等线; font-size:11pt">Repositroy</span><span style="font-family:宋体; font-size:11pt">接口中的抽象方法那些设置</span><span style="font-family:等线; font-size:11pt">@Transcational</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">每种类型方法都有多个重载，比如</span><span style="font-family:等线; font-size:11pt">save</span><span style="font-family:宋体; font-size:11pt">，可以单个或批量保存</span></h5><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:112pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.005.png" width="590" height="116" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:112pt"><span style="font-family:等线; font-size:14pt">Crud的findAll</span><span style="font-family:等线; font-size:14pt">()</span><span style="font-family:等线; font-size:14pt">返回的是Iterable类型，需要强转，JpaRepository返回的是List类型</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">几乎所有集合都实现了</span><span style="font-family:等线; font-size:11pt">Iterable</span><span style="font-family:宋体; font-size:11pt">接口</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">delete </span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">先查后删</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">为什么先查后删</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">为了更符合orm，任何操作都要通过对象，直接删肯定是根据id去删，不优雅，orm的任何操作一般都是通过对象。但也可以直接通过hql和sql删，但这样就不是面向对象操作了。</span></p><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:98pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.006.png" width="641" height="243" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">update</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">没有专门的</span><span style="font-family:等线; font-size:11pt">update</span><span style="font-family:宋体; font-size:11pt">方法，</span><span style="font-family:等线; font-size:11pt">save</span><span style="font-family:宋体; font-size:11pt">会根据主键判断是插入还是更新。</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">将对象查出之后直接修改属性</span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:宋体; font-size:11pt">通过</span><span style="font-family:等线; font-size:11pt">set</span><span style="font-family:宋体; font-size:11pt">方法</span><span style="font-family:等线; font-size:11pt">)</span><span style="font-family:宋体; font-size:11pt">，不用调用</span><span style="font-family:等线; font-size:11pt">save</span><span style="font-family:宋体; font-size:11pt">也会触发更新，因为查出的对象在内存中处于持久态。</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">需要加@Transcational和@Rollback</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">(false)</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">，因为没有调方法，也就不可能使用在调用的方法上的事务(意味着当前语句执行时事务根本就没开启</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">)</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">，只能指望当前方法中的事务开启。</span></p><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">4.4</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">PagingAndSortingRepository</span></h3><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:70pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.007.png" width="297" height="69" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.4.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">默认只能在所有记录中设置分页和排序。</span><span style="font-family:等线; font-size:11pt">findAll==</span><span style="font-family:宋体; font-size:11pt">》如何设置过滤条件</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">使用</span><span style="font-family:等线; font-size:11pt">JapSpecificationExecutor</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">自己写实现类，不能用</span><span style="font-family:等线; font-size:11pt">SimpleJpaRepository</span><span style="font-family:宋体; font-size:11pt">的实现了</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.4.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">参数为</span><span style="font-family:等线; font-size:11pt">Pageable</span><span style="font-family:宋体; font-size:11pt">对象和</span><span style="font-family:等线; font-size:11pt">Sort</span><span style="font-family:宋体; font-size:11pt">对象</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">Pageable</span><span style="font-family:等线; font-size:11pt">   </span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">data.domain</span><span style="font-family:宋体; font-size:11pt">包下</span></h6><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:98pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.008.png" width="392" height="80" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">一般用</span><span style="font-family:等线; font-size:11pt">PageRequest.of(0, 5, Sort.by("sclass"))</span><span style="font-family:宋体; font-size:11pt">构建，就是个封装了分页关键属性的对象。比如</span><span style="font-family:等线; font-size:11pt">index</span><span style="font-family:宋体; font-size:11pt">，</span><span style="font-family:等线; font-size:11pt">size</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">分页有</span><span style="font-family:等线; font-size:11pt">3</span><span style="font-family:宋体; font-size:11pt">个基础属性，</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">个额外属性。</span><span style="font-family:等线; font-size:11pt">index</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">size</span><span style="font-family:宋体; font-size:11pt">一般都是前台用户设置，总记录数要由后台返回。一般封装在一个</span><span style="font-family:等线; font-size:11pt">DTO</span><span style="font-family:宋体; font-size:11pt">中。而</span><span style="font-family:等线; font-size:11pt">spring</span><span style="font-family:宋体; font-size:11pt">提供了这个</span><span style="font-family:等线; font-size:11pt">DTO</span><span style="font-family:宋体; font-size:11pt">，就是</span><span style="color:#e15a61; font-family:Consolas; font-size:13pt">Page&lt;T&gt;</span><span style="font-family:宋体; font-size:11pt">，用来封装分页条件。</span><span style="font-family:等线; font-size:11pt">findAll</span><span style="font-family:宋体; font-size:11pt">的条件就是</span><span style="font-family:等线; font-size:11pt">Specification</span><span style="font-family:宋体; font-size:11pt">和</span><span style="color:#e15a61; font-family:Consolas; font-size:13pt">Pageable</span><span style="color:#e15a61; font-family:宋体; font-size:13pt">，</span><span style="color:#e15a61; font-family:Consolas; font-size:13pt">Pageable</span><span style="color:#e15a61; font-family:宋体; font-size:13pt">里面可以封装</span><span style="color:#e15a61; font-family:Consolas; font-size:13pt">Sort</span><span style="color:#e15a61; font-family:宋体; font-size:13pt">，</span><span style="font-family:宋体; font-size:11pt">返回的就是</span><span style="font-family:等线; font-size:11pt">Page</span><span style="font-family:等线; font-size:11pt">&lt;T&gt;</span><span style="font-family:宋体; font-size:11pt">，是个</span><span style="font-family:等线; font-size:11pt">VO</span><span style="font-family:宋体; font-size:11pt">，用来给前端页面提供动态数据。</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">可以通过</span><span style="font-family:等线; font-size:11pt">getTotalElements()</span><span style="font-family:宋体; font-size:11pt">，</span><span style="font-family:等线; font-size:11pt">getTotalPages()</span><span style="font-family:宋体; font-size:11pt">来获取总记录数，总页数。</span></h6><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:868.7pt"><p style="background-color:#c9efcb; line-height:10.5pt; margin:0pt"><span style="color:#808000; font-family:Consolas; font-size:10.5pt">@SpringBootTest</span><br /><span style="color:#000080; font-family:Consolas; font-size:10.5pt; font-weight:bold">class </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">DatajpaApplicationTests </span><span style="font-family:Consolas; font-size:10.5pt">{</span><br /><span style="font-family:Consolas; font-size:10.5pt">    </span><span style="color:#808000; font-family:Consolas; font-size:10.5pt">@Autowired</span><br /><span style="color:#808000; font-family:Consolas; font-size:10.5pt">    </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt">StuDao </span><span style="color:#660e7a; font-family:Consolas; font-size:10.5pt; font-weight:bold">stuDao</span><span style="font-family:Consolas; font-size:10.5pt">;</span><br /><br /><span style="font-family:Consolas; font-size:10.5pt">    </span><span style="color:#808000; font-family:Consolas; font-size:10.5pt">@Test</span><br /><span style="color:#808000; font-family:Consolas; font-size:10.5pt">    </span><span style="color:#000080; font-family:Consolas; font-size:10.5pt; font-weight:bold">void </span><span style="font-family:Consolas; font-size:10.5pt">contextLoads() {</span><br /><span style="font-family:Consolas; font-size:10.5pt">        </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt">Logger </span><span style="font-family:Consolas; font-size:10.5pt">logger = </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">LoggerFactory</span><span style="font-family:Consolas; font-size:10.5pt">.</span><span style="font-family:Consolas; font-size:10.5pt; font-style:italic">getLogger</span><span style="font-family:Consolas; font-size:10.5pt">(</span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">DatajpaApplicationTests</span><span style="font-family:Consolas; font-size:10.5pt">.</span><span style="color:#000080; font-family:Consolas; font-size:10.5pt; font-weight:bold">class</span><span style="font-family:Consolas; font-size:10.5pt">);</span><br /><span style="font-family:Consolas; font-size:10.5pt">        </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">/*</span><br /><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">        </span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">官方提供的和自定义的方法都可以用，</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">            </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">findAll</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">是默认提供的方法</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">            </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">findList</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">是自定义的方法</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">         </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">*/</span><br /><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">        </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt">List</span><span style="font-family:Consolas; font-size:10.5pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">Student</span><span style="font-family:Consolas; font-size:10.5pt">&gt; studentList = </span><span style="color:#660e7a; font-family:Consolas; font-size:10.5pt; font-weight:bold">stuDao</span><span style="font-family:Consolas; font-size:10.5pt">.findAll();</span><br /><span style="font-family:Consolas; font-size:10.5pt">        logger.error(</span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">String</span><span style="font-family:Consolas; font-size:10.5pt">.</span><span style="font-family:Consolas; font-size:10.5pt; font-style:italic">format</span><span style="font-family:Consolas; font-size:10.5pt">(</span><span style="color:#008000; font-family:Consolas; font-size:10.5pt; font-weight:bold">"%1$s"</span><span style="font-family:Consolas; font-size:10.5pt">, </span><span style="color:#660e7a; font-family:Consolas; font-size:10.5pt; font-weight:bold">stuDao</span><span style="font-family:Consolas; font-size:10.5pt">.findList(</span><span style="color:#0000ff; font-family:Consolas; font-size:10.5pt">108</span><span style="font-family:Consolas; font-size:10.5pt">)));</span><br /><span style="font-family:Consolas; font-size:10.5pt">        </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">/*</span><br /><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">        dataJpa</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">实现 ： 分页</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic"> </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">+ </span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">排序</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">            </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">findAll</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">方法</span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">2</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">个参数</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">                </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">args0 Specification</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">，用来封装查询条件</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">                </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">args1 Pageable</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">类型</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">                    其实现类一般用</span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">PageRequest</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">，直接用静态方法返回，其构造器是</span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">protected</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">的，不能直接用。</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">                    </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">of</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">方法构建时可以传入</span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">Sort</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">对象，</span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">Sort</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">对象通过静态的</span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">by</span><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">方法构建</span><br /><span style="color:#808080; font-family:宋体; font-size:10.5pt; font-style:italic">         </span><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">*/</span><br /><span style="color:#808080; font-family:Consolas; font-size:10.5pt; font-style:italic">        </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt">Page</span><span style="font-family:Consolas; font-size:10.5pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">Student</span><span style="font-family:Consolas; font-size:10.5pt">&gt; studentPage = </span><span style="color:#660e7a; font-family:Consolas; font-size:10.5pt; font-weight:bold">stuDao</span><span style="font-family:Consolas; font-size:10.5pt">.findAll(</span><br /><span style="font-family:Consolas; font-size:10.5pt">                </span><span style="color:#000080; font-family:Consolas; font-size:10.5pt; font-weight:bold">new </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">Specification</span><span style="font-family:Consolas; font-size:10.5pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">Student</span><span style="font-family:Consolas; font-size:10.5pt">&gt;() {</span><br /><span style="font-family:Consolas; font-size:10.5pt">                    </span><span style="color:#808000; font-family:Consolas; font-size:10.5pt">@Override</span><br /><span style="color:#808000; font-family:Consolas; font-size:10.5pt">                    </span><span style="color:#000080; font-family:Consolas; font-size:10.5pt; font-weight:bold">public </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt">Predicate </span><span style="font-family:Consolas; font-size:10.5pt">toPredicate(</span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt">Root</span><span style="font-family:Consolas; font-size:10.5pt">&lt;</span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">Student</span><span style="font-family:Consolas; font-size:10.5pt">&gt; root, </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt">CriteriaQuery</span><span style="font-family:Consolas; font-size:10.5pt">&lt;?&gt; criteriaQuery, </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt">CriteriaBuilder </span><span style="font-family:Consolas; font-size:10.5pt">criteriaBuilder) {</span><br /><span style="font-family:Consolas; font-size:10.5pt">                        </span><span style="color:#000080; font-family:Consolas; font-size:10.5pt; font-weight:bold">return null</span><span style="font-family:Consolas; font-size:10.5pt">;</span><br /><span style="font-family:Consolas; font-size:10.5pt">                    }</span><br /><span style="font-family:Consolas; font-size:10.5pt">                },</span><br /><span style="font-family:Consolas; font-size:10.5pt">                </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">PageRequest</span><span style="font-family:Consolas; font-size:10.5pt">.</span><span style="font-family:Consolas; font-size:10.5pt; font-style:italic">of</span><span style="font-family:Consolas; font-size:10.5pt">(</span><span style="color:#0000ff; font-family:Consolas; font-size:10.5pt">0</span><span style="font-family:Consolas; font-size:10.5pt">, </span><span style="color:#0000ff; font-family:Consolas; font-size:10.5pt">5</span><span style="font-family:Consolas; font-size:10.5pt">, </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">Sort</span><span style="font-family:Consolas; font-size:10.5pt">.</span><span style="font-family:Consolas; font-size:10.5pt; font-style:italic">by</span><span style="font-family:Consolas; font-size:10.5pt">(</span><span style="color:#008000; font-family:Consolas; font-size:10.5pt; font-weight:bold">"sclass"</span><span style="font-family:Consolas; font-size:10.5pt">)));</span><br /><br /><span style="font-family:Consolas; font-size:10.5pt">        </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">System</span><span style="font-family:Consolas; font-size:10.5pt">.</span><span style="color:#660e7a; font-family:Consolas; font-size:10.5pt; font-style:italic; font-weight:bold">out</span><span style="font-family:Consolas; font-size:10.5pt">.println(studentPage.getContent());</span><br /><span style="font-family:Consolas; font-size:10.5pt">        </span><span style="color:#e15a61; font-family:Consolas; font-size:10.5pt; font-weight:bold">System</span><span style="font-family:Consolas; font-size:10.5pt">.</span><span style="color:#660e7a; font-family:Consolas; font-size:10.5pt; font-style:italic; font-weight:bold">out</span><span style="font-family:Consolas; font-size:10.5pt">.println(studentPage.getTotalPages());</span><br /><br /><span style="font-family:Consolas; font-size:10.5pt">    }</span><br /><span style="font-family:Consolas; font-size:10.5pt">}</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">Sort</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">使用静态方法构建，也可以使用</span><span style="font-family:等线; font-size:11pt">public</span><span style="font-family:宋体; font-size:11pt">的构造器</span></h6><p style="line-height:14pt; margin:7.8pt 0pt 7.8pt 70.9pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.009.png" width="284" height="84" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:512pt"><p style="line-height:11pt; margin:6pt 0pt"><span style="color:#000080; font-family:等线; font-size:11pt; font-weight:bold">public </span><span style="font-family:等线; font-size:11pt">Sort(</span><span style="color:#e15a61; font-family:等线; font-size:11pt; font-weight:bold">Direction </span><span style="font-family:等线; font-size:11pt">direction, </span><span style="color:#e15a61; font-family:等线; font-size:11pt">List</span><span style="font-family:等线; font-size:11pt">&lt;</span><span style="color:#e15a61; font-family:等线; font-size:11pt; font-weight:bold">String</span><span style="font-family:等线; font-size:11pt">&gt; properties)</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:512pt"><p style="line-height:13pt; margin:6pt 0pt"><span style="color:#000080; font-family:Consolas; font-size:13pt; font-weight:bold">public </span><span style="font-family:Consolas; font-size:13pt">Sort(</span><span style="color:#e15a61; font-family:Consolas; font-size:13pt; font-weight:bold">Order</span><span style="font-family:Consolas; font-size:13pt">... orders) {</span><br /><span style="font-family:Consolas; font-size:13pt">   </span><span style="color:#000080; font-family:Consolas; font-size:13pt; font-weight:bold">this</span><span style="font-family:Consolas; font-size:13pt">(</span><span style="color:#e15a61; font-family:Consolas; font-size:13pt; font-weight:bold">Arrays</span><span style="font-family:Consolas; font-size:13pt">.</span><span style="font-family:Consolas; font-size:13pt; font-style:italic">asList</span><span style="font-family:Consolas; font-size:13pt">(orders));</span><br /><span style="font-family:Consolas; font-size:13pt">}</span></p></td></tr></table><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">Direction</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">是排序规则的封装的枚举类，提供了</span><span style="font-family:等线; font-size:11pt">ASC</span><span style="font-family:宋体; font-size:11pt">，</span><span style="font-family:等线; font-size:11pt">DESC</span><span style="font-family:宋体; font-size:11pt">等常量</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">Order</span><span style="font-family:宋体; font-size:11pt">：</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">Sort</span><span style="font-family:宋体; font-size:11pt">的静态内部类，可以方便的获取</span><span style="font-family:等线; font-size:11pt">Sort</span><span style="font-family:宋体; font-size:11pt">的属性。</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#000080; font-family:'等线 Light'; font-size:11pt; font-weight:bold">public </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Order(</span><span style="color:#e15a61; font-family:'等线 Light'; font-size:11pt; font-weight:bold">Direction </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">direction, </span><span style="color:#e15a61; font-family:'等线 Light'; font-size:11pt; font-weight:bold">String </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">property)</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">  </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">一个Order就可以封装一个排序属性和规则。</span></p><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">4.5</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">JpaRepository</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.5.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">位于</span><span style="font-family:等线; font-size:11pt">data-jpa</span><span style="font-family:宋体; font-size:11pt">包下，而</span><span style="font-family:等线; font-size:11pt">PagingAndSortingRepository</span><span style="font-family:宋体; font-size:11pt">位于</span><span style="font-family:等线; font-size:11pt">data-commons</span><span style="font-family:宋体; font-size:11pt">包下</span></h4><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:77.6pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:754.65pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="color:#808000; font-family:等线; font-size:11pt">@NoRepositoryBean</span><br /><span style="color:#000080; font-family:等线; font-size:11pt; font-weight:bold">public interface </span><span style="font-family:等线; font-size:11pt">JpaRepository</span><span style="font-family:等线; font-size:11pt">&lt;</span><span style="color:#20999d; font-family:等线; font-size:11pt">T</span><span style="font-family:等线; font-size:11pt">, </span><span style="color:#20999d; font-family:等线; font-size:11pt">ID </span><span style="color:#000080; font-family:等线; font-size:11pt; font-weight:bold">extends </span><span style="font-family:等线; font-size:11pt">Serializable</span><span style="font-family:等线; font-size:11pt">&gt; </span><span style="color:#000080; font-family:等线; font-size:11pt; font-weight:bold">extends </span><span style="font-family:等线; font-size:11pt">PagingAndSortingRepository</span><span style="font-family:等线; font-size:11pt">&lt;</span><span style="color:#20999d; font-family:等线; font-size:11pt">T</span><span style="font-family:等线; font-size:11pt">, </span><span style="color:#20999d; font-family:等线; font-size:11pt">ID</span><span style="font-family:等线; font-size:11pt">&gt;</span></p></td></tr></table><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:112pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.010.png" width="453" height="205" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.5.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">DataJpa</span><span style="font-family:宋体; font-size:11pt">的这几个接口定义时都设置了</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">个泛型，一个是给返回值设，一个是给参数设</span></h4><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:112pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.011.png" width="428" height="115" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.5.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">将其继承的所有结果的方法的返回值修改为易用的类型，做了</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">适配处理</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:Wingdings; font-size:11pt"></span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">重写可以修改返回值，只要是被重写方法返回值的子类即可</span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:宋体; font-size:11pt">网上很多都说错了，说成必须一致</span><span style="font-family:等线; font-size:11pt">)</span><span style="font-family:宋体; font-size:11pt">。</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">重写：返回值、抛出异常小于被重写的，修饰符大于被重写的</span></h5><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">4.6</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><a name="_Hlk10745603"><span style="font-family:等线; font-size:11pt; font-weight:bold">JpaSpecificationExecutor</span></a></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.6.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="-aw-bookmark-end:_Hlk10745603"></span><span style="font-family:宋体; font-size:11pt">封装了多条件查询和分页排序，</span><span style="font-family:等线; font-size:11pt">JPASpecificationExecutor </span><span style="font-family:宋体; font-size:11pt">是单独存在。</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">完全独</span><span style="font-family:宋体; font-size:11pt">立。</span></h4><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:84pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.012.png" width="342" height="128" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">Specafication</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">封装了查询条件，内部就一个抽象方法</span><span style="color:#e15a61; font-family:等线; font-size:11pt">Predicate</span><span style="color:#e15a61; font-family:等线; font-size:11pt">  </span><span style="font-family:等线; font-size:11pt">toPredicate</span><span style="font-family:等线; font-size:11pt">()</span><span style="font-family:宋体; font-size:11pt">，</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">被实现类重写后将实现类传到</span><span style="font-family:等线; font-size:11pt">findAll</span><span style="font-family:宋体; font-size:11pt">中，会自动获取方法返回值</span><span style="color:#e15a61; font-family:等线; font-size:11pt">Predicate</span><span style="color:#e15a61; font-family:宋体; font-size:11pt">，拼接查询条件。</span></h6><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:826.2pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="color:#000080; font-family:等线; font-size:11pt; font-weight:bold">public interface </span><span style="color:#e15a61; font-family:等线; font-size:11pt">Specification</span><span style="font-family:等线; font-size:11pt">&lt;</span><span style="color:#20999d; font-family:等线; font-size:11pt">T</span><span style="font-family:等线; font-size:11pt">&gt; {</span><br /><span style="font-family:等线; font-size:11pt">   </span><span style="font-family:等线; font-size:11pt">/**</span><br /><span style="font-family:等线; font-size:11pt">    * Creates a WHERE clause for a query of the referenced entity in form of a {</span><span style="font-family:等线; font-size:11pt; font-weight:bold">@link </span><span style="color:#e15a61; font-family:等线; font-size:11pt">Predicate</span><span style="font-family:等线; font-size:11pt">} for the given</span><br /><span style="font-family:等线; font-size:11pt">    * {</span><span style="font-family:等线; font-size:11pt; font-weight:bold">@link </span><span style="color:#e15a61; font-family:等线; font-size:11pt">Root</span><span style="font-family:等线; font-size:11pt">} and {</span><span style="font-family:等线; font-size:11pt; font-weight:bold">@link </span><span style="color:#e15a61; font-family:等线; font-size:11pt">CriteriaQuery</span><span style="font-family:等线; font-size:11pt">}.</span><br /><span style="font-family:等线; font-size:11pt">    * </span><br /><span style="font-family:等线; font-size:11pt">    * </span><span style="font-family:等线; font-size:11pt; font-weight:bold">@param </span><span style="color:#3d3d3d; font-family:等线; font-size:11pt; font-weight:bold">root</span><br /><span style="color:#3d3d3d; font-family:等线; font-size:11pt; font-weight:bold">    </span><span style="font-family:等线; font-size:11pt">* </span><span style="font-family:等线; font-size:11pt; font-weight:bold">@param </span><span style="color:#3d3d3d; font-family:等线; font-size:11pt; font-weight:bold">query</span><br /><span style="color:#3d3d3d; font-family:等线; font-size:11pt; font-weight:bold">    </span><span style="font-family:等线; font-size:11pt">* </span><span style="font-family:等线; font-size:11pt; font-weight:bold">@return </span><span style="font-family:等线; font-size:11pt">a {</span><span style="font-family:等线; font-size:11pt; font-weight:bold">@link </span><span style="color:#e15a61; font-family:等线; font-size:11pt">Predicate</span><span style="font-family:等线; font-size:11pt">}, must not be {</span><span style="font-family:等线; font-size:11pt; font-weight:bold">@literal </span><span style="font-family:等线; font-size:11pt">null}.</span><br /><span style="font-family:等线; font-size:11pt">    */</span><br /><span style="font-family:等线; font-size:11pt">   </span><span style="color:#e15a61; font-family:等线; font-size:11pt">Predicate </span><span style="font-family:等线; font-size:11pt">toPredicate(</span><span style="color:#e15a61; font-family:等线; font-size:11pt">Root</span><span style="font-family:等线; font-size:11pt">&lt;</span><span style="color:#20999d; font-family:等线; font-size:11pt">T</span><span style="font-family:等线; font-size:11pt">&gt; root, </span><span style="color:#e15a61; font-family:等线; font-size:11pt">CriteriaQuery</span><span style="font-family:等线; font-size:11pt">&lt;?&gt; query, </span><span style="color:#e15a61; font-family:等线; font-size:11pt">CriteriaBuilder </span><span style="font-family:等线; font-size:11pt">cb);</span><br /><span style="font-family:等线; font-size:11pt">}</span></p></td></tr></table><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">根据给定的条件为关联的entity的一个查询创建一个where子句</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">。唯一方法的</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">参数跟QBC一致。</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">查询条件就是</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt"> 属性 规则 值</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Root封装属性</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(4)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">CriteriaQuery封装规则和值</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(5)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">CriteriaBuilder用来拼接，内部方法的返回值</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">都是</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Predicate</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">，难道这个方法只能有一个条件？当然不是，</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Predicate</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">有拼接多个</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Predicate</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">的方法，拼接后的返回值还是</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Predicate</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">，因为需要设定多个查询条件之间的关系，比如and、or</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">  </span><span style="color:#1f3864; font-family:Wingdings; font-size:11pt"></span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt"> </span><span style="font-family:'等线 Light'; font-size:11pt">c</span><span style="font-family:'等线 Light'; font-size:11pt">b</span><span style="font-family:'等线 Light'; font-size:11pt">.and</span><span style="font-family:'等线 Light'; font-size:11pt">(</span><span style="font-family:'等线 Light'; font-size:11pt">)  </span><span style="font-family:'等线 Light'; font-size:11pt">Predicate and(Predicate... var1);</span><span style="font-family:'等线 Light'; font-size:11pt">  </span><span style="font-family:'等线 Light'; font-size:11pt">参数是可变参数 </span><span style="font-family:Wingdings; font-size:11pt"></span><span style="font-family:'等线 Light'; font-size:11pt"> </span><span style="font-family:'等线 Light'; font-size:11pt">可以传入数组，不能传集合</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">必须跟其他接口一起被自定义接口继承才能使用</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">为什么？</span><span style="font-family:等线; font-size:11pt">JSE</span><span style="font-family:宋体; font-size:11pt">没有继承任何接口，在基于</span><span style="font-family:等线; font-size:11pt">JDK</span><span style="font-family:宋体; font-size:11pt">的动态代理机制中，无法创建目标对象为</span><span style="font-family:等线; font-size:11pt">SJR</span><span style="font-family:宋体; font-size:11pt">的代理对象，因为没有</span><span style="font-family:等线; font-size:11pt">JSE</span><span style="font-family:宋体; font-size:11pt">这个接口的</span><span style="font-family:等线; font-size:11pt">class</span><span style="font-family:宋体; font-size:11pt">对象的</span><span style="font-family:等线; font-size:11pt">getInterfaces</span><span style="font-family:宋体; font-size:11pt">为空，则创建自定义的代理对象</span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:宋体; font-size:11pt">比如</span><span style="font-family:等线; font-size:11pt">UserDao</span><span style="font-family:宋体; font-size:11pt">时</span><span style="font-family:等线; font-size:11pt">)</span><span style="font-family:宋体; font-size:11pt">，自然不能创建实现类为</span><span style="font-family:等线; font-size:11pt">SJR</span><span style="font-family:宋体; font-size:11pt">的代理对象。而如果跟其他接口一起被</span><span style="font-family:等线; font-size:11pt">UserDao</span><span style="font-family:宋体; font-size:11pt">继承，就可以创建了。</span></h6><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.6.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">usage</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">可通过创建</span><span style="font-family:等线; font-size:11pt">Specification</span><span style="font-family:宋体; font-size:11pt">的匿名内部类来创建条件对象</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">多条件查询的操作</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">使用</span><span style="font-family:等线; font-size:11pt">cd</span><span style="font-family:等线; font-size:11pt">.and/or</span><span style="font-family:宋体; font-size:11pt">来拼接多个</span><span style="font-family:等线; font-size:11pt">Predicate</span></h6><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:84pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.013.png" width="672" height="289" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">上面的方式需要创建集合，数组。可以直接利用可变参数的特性返回</span></h6><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:98pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.014.png" width="609" height="73" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">进行模糊查询时，</span><span style="font-family:等线; font-size:11pt">root</span><span style="font-family:等线; font-size:11pt">.get</span><span style="font-family:宋体; font-size:11pt">返回值为</span><span style="font-family:等线; font-size:11pt">Path</span><span style="font-family:宋体; font-size:11pt">，自带转为</span><span style="font-family:等线; font-size:11pt">String</span><span style="font-family:宋体; font-size:11pt">的方法</span></h6><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:140pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.015.png" width="806" height="34" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">条件查询和分页</span></h5><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:112pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.016.png" width="460" height="131" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /><span style="font-family:等线; font-size:14pt">。</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">如果即分页又排序又条件过滤？</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 85.05pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">Pageable的构造方法中有个可以传Sort的</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">，把Sort整合到了Pageable中，这样就保证findAll返回值是Page</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">&lt;T&gt; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">：</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt"> VO/DTO</span></p><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">4.7</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">自定义</span><span style="font-family:等线; font-size:11pt; font-weight:bold">Repository</span><span style="font-family:宋体; font-size:11pt; font-weight:bold">接口</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.7.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">如果官方提供的接口无法满足需求，可以自定义接口，然后创建自定义接口的实现类</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">为了保证还能同时使用官方提供的方法。</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">(UsersDao</span><span style="font-family:等线; font-size:11pt">)</span><span style="font-family:宋体; font-size:11pt">要同时继承官方接口</span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:等线; font-size:11pt">JPARepository</span><span style="font-family:宋体; font-size:11pt">和自定义的接口</span><span style="font-family:等线; font-size:11pt">)</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.7.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">usage</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">创建接口</span></h5><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 112pt; padding-left:14pt; text-indent:-14pt"><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public interface </span><span style="font-family:Consolas; font-size:11pt">UsersRepository {</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public </span><span style="font-family:Consolas; font-size:11pt">Users findUserById(Integer </span><span style="color:#6a3e3e; font-family:Consolas; font-size:11pt">userid</span><span style="font-family:Consolas; font-size:11pt">);</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 112pt; padding-left:14pt; text-indent:-14pt"><span style="font-family:Consolas; font-size:11pt">}</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">使用接口</span></h5><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 85.05pt; text-indent:3.5pt"><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public interface </span><span style="font-family:Consolas; font-size:11pt">UsersDao </span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">extends </span><span style="font-family:Consolas; font-size:11pt">JpaRepository&lt;Users, Integer&gt;,JpaSpecificationExecutor&lt;Users&gt;,UsersRepository{</span><span style="font-family:Consolas; font-size:11pt"> </span><span style="font-family:Consolas; font-size:11pt">}</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">当然也可以直接用</span><span style="font-family:等线; font-size:11pt">UsersRepository</span><span style="font-family:等线; font-size:11pt"> </span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">extends</span><span style="color:#7f0055; font-family:宋体; font-size:11pt; font-weight:bold">，但这样</span><span style="font-family:等线; font-size:11pt">UsersRepository</span><span style="font-family:宋体; font-size:11pt">就不能复用了。</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">同</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">JpaSpecificationExecuto</span><span style="font-family:等线; font-size:11pt">r</span><span style="font-family:宋体; font-size:11pt">接口</span><span style="font-family:宋体; font-size:11pt">的使用</span><span style="font-family:宋体; font-size:11pt">一样，必须同时实现官方接口才行，所以需要一个适配接口来把自定义接口和官方接口结合起来</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:Wingdings; font-size:11pt"></span><span style="font-family:等线; font-size:11pt"> UsersDao</span><span style="font-family:宋体; font-size:11pt">接口</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">创建实现类</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">Users</span><span style="font-family:等线; font-size:11pt">Dao</span><span style="font-family:宋体; font-size:11pt">接口使用过将实现类命名为接口</span><span style="font-family:等线; font-size:11pt">+Impl</span><span style="font-family:宋体; font-size:11pt">的形式来实现</span><span style="font-family:等线; font-size:11pt">UsersDao</span><span style="font-family:宋体; font-size:11pt">接口</span></h6><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 126pt; padding-left:28pt; text-indent:-28pt"><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public class </span><span style="font-family:Consolas; font-size:11pt">UsersDaoImpl </span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">implements </span><span style="font-family:Consolas; font-size:11pt">UsersRepository {</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@PersistenceContext</span><span style="font-family:Consolas; font-size:11pt">(name=</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"entityManagerFactory"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">private </span><span style="font-family:Consolas; font-size:11pt">EntityManager </span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">em</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@Override</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public </span><span style="font-family:Consolas; font-size:11pt">Users findUserById(Integer </span><span style="color:#6a3e3e; font-family:Consolas; font-size:11pt">userid</span><span style="font-family:Consolas; font-size:11pt">) {</span><br /><span style="font-family:Consolas; font-size:11pt">System.</span><span style="color:#0000c0; font-family:Consolas-BoldItalic; font-size:11pt; font-style:italic; font-weight:bold">out</span><span style="font-family:Consolas; font-size:11pt">.println(</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"MyRepository......"</span><span style="font-family:Consolas; font-size:11pt">);</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">  </span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">return this</span><span style="font-family:Consolas; font-size:11pt">.</span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">em</span><span style="font-family:Consolas; font-size:11pt">.find(Users.</span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">class</span><span style="font-family:Consolas; font-size:11pt">, </span><span style="color:#6a3e3e; font-family:Consolas; font-size:11pt">userid</span><span style="font-family:Consolas; font-size:11pt">);</span><br /><span style="font-family:Consolas; font-size:11pt">}</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 126pt; padding-left:28pt; text-indent:-28pt"><span style="font-family:Consolas; font-size:11pt">}</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">调用</span></h5><p style="line-height:14pt; margin:7.8pt 0pt 7.8pt 85.05pt"><span style="color:#646464; font-family:Consolas; font-size:11pt">@RunWith</span><span style="font-family:Consolas; font-size:11pt">(SpringJUnit4ClassRunner.</span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">class</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">@ContextConfiguration</span><span style="font-family:Consolas; font-size:11pt">(</span><span style="color:#2a00ff; font-family:Consolas; font-size:11pt">"classpath:applicationContext.xml"</span><span style="font-family:Consolas; font-size:11pt">)</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public class </span><span style="font-family:Consolas; font-size:11pt">RepositoryTest {</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">  </span><span style="color:#646464; font-family:Consolas; font-size:11pt">@Autowired</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">  </span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">private </span><span style="font-family:Consolas; font-size:11pt">UsersDao </span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">usersDao</span><span style="font-family:Consolas; font-size:11pt">;</span><br /><span style="color:#3f5fbf; font-family:Consolas; font-size:11pt">  </span><span style="color:#3f5fbf; font-family:Consolas; font-size:11pt">/**</span><br /><span style="color:#3f5fbf; font-family:Consolas; font-size:11pt">  </span><span style="color:#3f5fbf; font-family:Consolas; font-size:11pt">* </span><span style="color:#3f5fbf; font-family:宋体; font-size:11pt">需求： 根据用户 </span><span style="color:#3f5fbf; font-family:Consolas; font-size:11pt">ID </span><span style="color:#3f5fbf; font-family:宋体; font-size:11pt">查询数据</span><br /><span style="color:#3f5fbf; font-family:等线; font-size:11pt">  </span><span style="color:#3f5fbf; font-family:Consolas; font-size:11pt">*/</span><br /><span style="color:#646464; font-family:Consolas; font-size:11pt">  </span><span style="color:#646464; font-family:Consolas; font-size:11pt">@Test</span><br /><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">  </span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">public void </span><span style="font-family:Consolas; font-size:11pt">test1(){</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="font-family:Consolas; font-size:11pt">Users </span><span style="color:#6a3e3e; font-family:Consolas; font-size:11pt">users </span><span style="font-family:Consolas; font-size:11pt">= </span><span style="color:#7f0055; font-family:Consolas-Bold; font-size:11pt; font-weight:bold">this</span><span style="font-family:Consolas; font-size:11pt">.</span><span style="color:#0000c0; font-family:Consolas; font-size:11pt">usersDao</span><span style="font-family:Consolas; font-size:11pt">.findUserById(5);</span><br /><span style="font-family:Consolas; font-size:11pt">    </span><span style="font-family:Consolas; font-size:11pt">System.</span><span style="color:#0000c0; font-family:Consolas-BoldItalic; font-size:11pt; font-style:italic; font-weight:bold">out</span><span style="font-family:Consolas; font-size:11pt">.println(</span><span style="color:#6a3e3e; font-family:Consolas; font-size:11pt">users</span><span style="font-family:Consolas; font-size:11pt">);</span><br /><span style="font-family:Consolas; font-size:11pt">  </span><span style="font-family:Consolas; font-size:11pt">}</span><br /><span style="font-family:Consolas; font-size:11pt">}</span></p><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">4.8</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">代理对象</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.8.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">定义好接口，用的时候直接用</span><span style="font-family:等线; font-size:11pt">@autoWired</span><span style="font-family:宋体; font-size:11pt">注入即可</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">4.8.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">打印</span><span style="font-family:等线; font-size:11pt">dao</span><span style="font-family:宋体; font-size:11pt">接口的类型，可以看到对象是个代理对象且使用的是</span><span style="font-family:等线; font-size:11pt">jdk</span><span style="font-family:宋体; font-size:11pt">的代理接口创建</span></h4><p style="line-height:14pt; margin:7.8pt 0pt 7.8pt 56.7pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.017.png" width="700" height="76" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 56.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">谁代理谁？</span><span style="font-family:宋体; font-size:11pt"> </span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">userdDao</span><span style="font-family:宋体; font-size:11pt">对象代理</span><span style="font-family:等线; font-size:11pt">UserDao</span><span style="font-family:宋体; font-size:11pt">，是接口的代理对象，</span><span style="font-family:等线; font-size:11pt">userdDao</span><span style="font-family:宋体; font-size:11pt">对象是基于</span><span style="font-family:等线; font-size:11pt">SimpleJpaRepository</span><span style="font-family:宋体; font-size:11pt">创建的。</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">SimpleJpaRepository</span><span style="font-family:宋体; font-size:11pt">，就是</span><span style="font-family:等线; font-size:11pt">data-jpa</span><span style="font-family:宋体; font-size:11pt">包下</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">个接口的实现类。</span><span style="font-family:等线; font-size:11pt">SimpleJpaRepository</span><span style="font-family:宋体; font-size:11pt">把</span><span style="font-family:等线; font-size:11pt">4</span><span style="font-family:宋体; font-size:11pt">个官方接口中的方法都进行了实现，底层使用</span><span style="font-family:等线; font-size:11pt">jdk</span><span style="font-family:宋体; font-size:11pt">的动态代理方法创建</span></h6><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:84pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.018.png" width="592" height="61" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 42.7pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">也可以手动创建代理类，创建指定接口的代理类</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 56.85pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">接口必须继承</span><span style="font-family:等线; font-size:11pt">Repository</span><span style="font-family:宋体; font-size:11pt">或其子接口</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 56.85pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">创建的是参数</span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:等线; font-size:11pt">UsersDao)</span><span style="font-family:宋体; font-size:11pt">的代理类</span><span style="font-family:等线; font-size:11pt">,</span><span style="font-family:等线; font-size:11pt">SimpleJpaRepository</span><span style="font-family:宋体; font-size:11pt">作为第三方的增强体在</span><span style="font-family:等线; font-size:11pt">invoke</span><span style="font-family:宋体; font-size:11pt">方法中注入。</span></h6><p style="line-height:14pt; margin:0pt 0pt 0pt 91pt; text-indent:14pt"><span style="color:#ff0000; font-family:等线; font-size:14pt">@Autowired</span></p><p style="line-height:14pt; margin:0pt 0pt 0pt 105pt; text-indent:7pt"><span style="color:#ff0000; font-family:等线; font-size:14pt">private</span><span style="color:#ff0000; font-family:等线; font-size:14pt"> </span><span style="color:#ff0000; font-family:等线; font-size:14pt">EntityManager</span><span style="color:#ff0000; font-family:等线; font-size:14pt">  </span><span style="color:#ff0000; font-family:等线; font-size:14pt">em；</span></p><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:112pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.019.png" width="874" height="86" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h2 style="margin:0pt 0pt 6pt 14.15pt; text-indent:0pt"><span style="font-family:等线; font-size:14pt; font-style:normal">5.</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">usage</span></h2><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:42pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.020.png" width="759" height="79" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="line-height:14pt; margin:7.8pt 0pt; text-indent:42pt"><img src="87af7292-c5cb-4018-8dc5-e3e0e952a758.021.png" width="783" height="516" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h2 style="margin:0pt 0pt 6pt 14.15pt; text-indent:0pt"><span style="font-family:等线; font-size:14pt; font-style:normal">6.</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">summary</span></h2><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">6.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">note</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">6.1.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">一个数据库不能同时被</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">个</span><span style="font-family:宋体; font-size:11pt">项目连接，会报连接错误</span></h4><h3 style="margin:0pt 0pt 6pt 28.35pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">6.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">一句话：</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">6.2.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">4</span><span style="font-family:宋体; font-size:11pt">个查询接口，一个条件接口。使用时需要自定义一个接口，让自定义接口继承一个方法接口</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">[</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">和查询条件接口</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">]</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">，如果默认提供的方法不够用，可以自定义方法</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 42.55pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">6.2.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">Repository</span><span style="font-family:宋体; font-size:11pt">仅是个标记接口，里面没有内容，用来告诉</span><span style="font-family:等线; font-size:11pt">springdata</span><span style="font-family:宋体; font-size:11pt">，根据接口中的抽象方法给这个接口的实现类的代理对象添加普通方法。</span><span style="font-family:等线; font-size:11pt">==</span><span style="font-family:宋体; font-size:11pt">》有时接口中只有</span><span style="font-family:等线; font-size:11pt">3</span><span style="font-family:宋体; font-size:11pt">个方法，但实现类有</span><span style="font-family:等线; font-size:11pt">10</span><span style="font-family:宋体; font-size:11pt">多个，这是正常的。</span></h4><p style="line-height:14pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:14pt">&#xa0;</span></p></div><div class="cnzz" style="display: none;">
	        <script src="https://s23.cnzz.com/z_stat.php?id=1277655852&web_id=1277655852" language="JavaScript"></script>
            </div>
            <div class="docpe" style="position: absolute;color: white;margin-left:-450;">
            <a target="_blank" href="http://www.docpe.com">档铺网——在线文档免费处理</a>
            </div>
            </body></html>