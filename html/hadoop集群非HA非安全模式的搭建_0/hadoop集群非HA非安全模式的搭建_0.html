<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="generator" content="Aspose.Words for .NET 15.1.0.0" /><title></title></head><body><div><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 34.95pt"><span style="font-family:等线; font-size:10.5pt">hadoop</span><span style="font-family:等线; font-size:10.5pt">集群搭建</span><span style="font-family:等线; font-size:10.5pt">的完整总结</span><span style="font-family:等线; font-size:10.5pt">：</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 34.95pt"><span style="font-family:等线; font-size:10.5pt">关于虚拟机的创建在</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 34.95pt"><span style="font-family:等线; font-size:10.5pt">包括</span><span style="font-family:等线; font-size:10.5pt">单节点、pseudo、完全分布式的搭建</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 34.95pt"><span style="font-family:等线; font-size:10.5pt">包括</span><span style="font-family:等线; font-size:10.5pt">日志历史服务器，ssh配置，时间同步，</span><span style="font-family:等线; font-size:10.5pt">初始化，</span><span style="font-family:等线; font-size:10.5pt">启动</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 34.95pt"><span style="font-family:等线; font-size:10.5pt">不包括安全模式</span><span style="font-family:等线; font-size:10.5pt">和HA</span><span style="font-family:等线; font-size:10.5pt">的设置</span><span style="font-family:等线; font-size:10.5pt">，在另一篇文章：</span></p><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">src</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.1.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">note</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hdfs</span><span style="font-family:宋体; font-size:11pt">是个集群，集群上的节点运行着很多进程，一个进程代表一个角色，一个程序，一个后台服务，一个</span><span style="font-family:等线; font-size:11pt">daemon</span><span style="font-family:宋体; font-size:11pt">。</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">因为是用</span><span style="font-family:等线; font-size:11pt">java</span><span style="font-family:宋体; font-size:11pt">写的，所以是</span><span style="font-family:等线; font-size:11pt">jvm</span><span style="font-family:宋体; font-size:11pt">进程</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.1.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:宋体; font-size:11pt">官网</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">左侧下方有</span><span style="font-family:等线; font-size:11pt">documentation</span><span style="font-family:宋体; font-size:11pt">，所有版本都有，有的需要手动改</span><span style="font-family:等线; font-size:11pt">url</span><span style="font-family:宋体; font-size:11pt">的版本号</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.001.png" width="656" height="184" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">ssh</span><span style="font-family:宋体; font-size:11pt">是用来远程登录的，</span><span style="font-family:等线; font-size:11pt">sshd</span><span style="font-family:宋体; font-size:11pt">是其后台服务，</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">ssh</span><span style="font-family:宋体; font-size:11pt">远程登陆不会加载登录的计算机的</span><span style="font-family:等线; font-size:11pt">etc/profile</span><span style="font-family:宋体; font-size:11pt">，交互是</span><span style="font-family:等线; font-size:11pt">bash</span><span style="font-family:宋体; font-size:11pt">启动的时候才会去读取</span><span style="font-family:等线; font-size:11pt">etc/profile</span><span style="font-family:宋体; font-size:11pt">，所以</span><span style="font-family:等线; font-size:11pt">jdk</span><span style="font-family:宋体; font-size:11pt">需要</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">次配置，一次是安装</span><span style="font-family:等线; font-size:11pt">jdk</span><span style="font-family:宋体; font-size:11pt">时在当前计算机的</span><span style="font-family:等线; font-size:11pt">/etc/profile</span><span style="font-family:宋体; font-size:11pt">配，第二次在</span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:宋体; font-size:11pt">脚本中，使用绝对路径指明命令的位置。</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">3</span><span style="font-family:宋体; font-size:11pt">种模式</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.002.png" width="522" height="79" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">单例模式：使用本地文件系统</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">伪分布式：一台计算机中，把所有角色进程启动</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">完全分布式：多个节点搭建集群，每台计算机都开角色进程</span></h6><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.1.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">有</span><span style="font-family:等线; font-size:11pt">100</span><span style="font-family:宋体; font-size:11pt">台机器，如何优雅的搭建集群并启动？？？</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">rsync</span><span style="font-family:宋体; font-size:11pt">工具</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">+</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">群起命令</span></h5><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">linux</span><span style="font-family:宋体; font-size:11pt; font-weight:bold">和虚拟机配置</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.2.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">虚拟机</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">创建</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">安装系统</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.2.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">从</span><span style="font-family:等线; font-size:11pt">standard</span><span style="font-family:宋体; font-size:11pt">克隆</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.2.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">ssh</span><span style="font-family:宋体; font-size:11pt">免密钥</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.2.4</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">时间同步</span></h4><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">hadoop</span><span style="font-family:宋体; font-size:11pt; font-weight:bold">的安装</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.3.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">解压</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">压缩包放在</span><span style="font-family:等线; font-size:11pt">/</span><span style="font-family:等线; font-size:11pt">opt/software</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">安装</span><span style="font-family:等线; font-size:11pt">HADOOP</span><span style="font-family:宋体; font-size:11pt">，解压到</span><span style="font-family:等线; font-size:11pt">/opt/module/</span><span style="font-family:宋体; font-size:11pt">下</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.3.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">env</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在</span><span style="font-family:等线; font-size:11pt">/etc/profile</span><span style="font-family:宋体; font-size:11pt">中配置</span><span style="font-family:等线; font-size:11pt">HADOOP</span><span style="font-family:等线; font-size:11pt">_HOME</span><span style="font-family:宋体; font-size:11pt">的环境变量且把</span><span style="font-family:等线; font-size:11pt">bin</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">sbin</span><span style="font-family:宋体; font-size:11pt">都给追加到</span><span style="font-family:等线; font-size:11pt">PATH</span><span style="font-family:宋体; font-size:11pt">中</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.3.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:宋体; font-size:11pt">目录结构</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">bin</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">命令</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">etc</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">linux</span><span style="font-family:宋体; font-size:11pt">的</span><span style="font-family:等线; font-size:11pt">etc</span><span style="font-family:宋体; font-size:11pt">存的也是配文，里面存了所有的配文</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">include</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">其他代码的文件</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">lib</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">没存</span><span style="font-family:等线; font-size:11pt">jar</span><span style="font-family:宋体; font-size:11pt">，存的是本地库，</span><span style="font-family:等线; font-size:11pt">jar</span><span style="font-family:宋体; font-size:11pt">存在</span><span style="font-family:等线; font-size:11pt">share</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{5}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">sbin</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">用来启动停止的命令</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{6}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">share</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">存</span><span style="font-family:等线; font-size:11pt">jar</span><span style="font-family:宋体; font-size:11pt">，里面按各种组件分类存</span><span style="font-family:等线; font-size:11pt">jar</span></h6><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.4</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">配文</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.4.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">分</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">类，默认和自定义，</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">者会有重复的，自定义优先级高。</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">默认，在</span><span style="font-family:等线; font-size:11pt">jar</span><span style="font-family:宋体; font-size:11pt">中，在官方文档左下角也有</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:70.5pt"><tr style="height:46.35pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:103pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">要</span><span style="font-family:等线; font-size:11pt">获取</span><span style="font-family:等线; font-size:11pt">的默认</span><span style="font-family:等线; font-size:11pt">文件</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:372.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">文件</span><span style="font-family:等线; font-size:11pt">存</span><span style="font-family:等线; font-size:11pt">放</span><span style="font-family:等线; font-size:11pt">在Hadoop的jar包中的位置</span></p></td></tr><tr style="height:46.35pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:103pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">[core-default.xml]</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:372.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">hadoop-common-2.7.2.jar/ core-default.xml</span></p></td></tr><tr style="height:46.35pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:103pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">[hdfs-default.xml]</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:372.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">hadoop-hdfs-2.7.2.jar/ hdfs-default.xml</span></p></td></tr><tr style="height:46.35pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:103pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">[yarn-default.xml]</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:372.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">hadoop-yarn-common-2.7.2.jar/ yarn-default.xml</span></p></td></tr><tr style="height:77.75pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:103pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">[mapred-default.xml]</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:372.5pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">hadoop-mapreduce-client-core-2.7.2.jar/ mapred-default.xml</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">自定义</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">core-site.xml</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">hdfs-site.xml</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">yarn-site.xml</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">mapred-site.xml</span><span style="font-family:宋体; font-size:11pt">四个配置文件存放在</span><span style="font-family:等线; font-size:11pt">$HADOOP_HOME/etc/hadoop</span><span style="font-family:宋体; font-size:11pt">这个路径上，</span><span style="font-family:宋体; font-size:11pt">这个路径也是</span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:宋体; font-size:11pt">会加载的路径，</span><span style="font-family:宋体; font-size:11pt">用户可以根据项目需求重新进行修改配置。</span></h6><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.4.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">summary</span></h4><p style="line-height:12pt; margin:7.8pt 0pt 7.8pt 42.3pt; text-indent:21pt"><span style="font-family:等线; font-size:12pt">一共8个</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">3</span><span style="font-family:宋体; font-size:11pt">个</span><span style="font-family:等线; font-size:11pt">env</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">4</span><span style="font-family:宋体; font-size:11pt">个</span><span style="font-family:等线; font-size:11pt">site</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">core-site.xml</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">fs</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">持久化目录</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">z</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">k</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">地址</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">hdfs-site.xml</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">副本数</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">NN，DN的持久化目录，一般用默认的</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">S</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">SN</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">的地址</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(4)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">HA的配置</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">yarn-site.xml</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">reducer获取数据的方式</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">RM的地址</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">日志聚集</span></p><p style="font-weight:normal; line-height:10.5pt; margin:0pt 0pt 0pt 105.85pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">1st</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">去8088点log就会跳转到历史服务器上，历史服务器在mapred上</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(4)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">日志保留时间</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">mapred-site.xml</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">mr运行在yarn上，on</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">yarn</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">历史服务器通讯地址，会把日志都放在这个节点上</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">历史服务器web端口，访问这个端口可以获取到聚集的日志</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">1</span><span style="font-family:宋体; font-size:11pt">个</span><span style="font-family:等线; font-size:11pt">slaves</span></h5><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.5</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">日志历史服务器</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.5.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">其实我们不用配置也可以在服务器后台通过命令行的形式查看相应的日志，但为了更方便查看日志，我们可以将其配置成通过</span><span style="font-family:等线; font-size:11pt">webUI</span><span style="font-family:宋体; font-size:11pt">的形式访问日志。</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">历史服务器默认是开启的，只是历史服务器的日志功能没有开启</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.003.png" width="754" height="269" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.004.png" width="603" height="159" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.005.png" width="731" height="292" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.5.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">yarn-site.xml</span></h4><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:105.95pt"><tr style="height:311.25pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:329.4pt"><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;configuration&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;!-- Site specific YARN configuration properties --&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;!-- Reducer获取数据的方式 --&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:等线; font-size:12pt">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:等线; font-size:12pt">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;/property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&#xa0;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;!-- 指定YARN的ResourceManager的地址 --&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:等线; font-size:12pt">&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:等线; font-size:12pt">&lt;value&gt;node103&lt;/value&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;/property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;!--日志聚集功能开启--&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">    &lt;value&gt;true&lt;/value&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;/property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&#xa0;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;!--日志保留时间设置，需把时间换成秒--&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">    &lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">    &lt;value&gt;604800&lt;/value&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;/property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="font-family:等线; font-size:12pt">&lt;/configuration&gt;</span></p></td></tr></table><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.5.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">mapred-site.xml</span></h4><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:98.85pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:326.15pt"><p style="line-height:11pt; margin:0pt"><span style="font-family:等线; font-size:11pt">&lt;configuration&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="font-family:等线; font-size:11pt">&lt;property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:等线; font-size:11pt">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:等线; font-size:11pt">&lt;value&gt;yarn&lt;/value&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="font-family:等线; font-size:11pt">&lt;/property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;!-- 历史服务器的rpc通讯地址 --&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;value&gt;node10</span><span style="color:#ff0000; font-family:等线; font-size:11pt">4</span><span style="color:#ff0000; font-family:等线; font-size:11pt">:10020&lt;/value&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;/property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;!-- 历史服务器的web地址 --&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;value&gt;node10</span><span style="color:#ff0000; font-family:等线; font-size:11pt">4</span><span style="color:#ff0000; font-family:等线; font-size:11pt">:19888&lt;/value&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;/property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="font-family:等线; font-size:11pt">&lt;/configuration&gt;</span></p></td></tr></table><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.5.4</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">启动</span></h4><p style="background-color:#ffffff; margin:6pt 0pt 6pt 63pt; text-indent:21pt"><span style="color:#333333; font-family:Verdana; font-size:10pt">yarn-daemon.sh start resourcemanager</span></p><p style="background-color:#ffffff; margin:6pt 0pt 6pt 63pt"><span style="color:#333333; font-family:宋体; font-size:10pt">　　</span><span style="color:#333333; font-family:Verdana; font-size:10pt">yarn-daemon.sh start nodemanager</span></p><p style="line-height:10pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="background-color:#ffffff; color:#333333; font-family:Verdana; font-size:10pt">mr-jobhistory-daemon.sh start </span><span style="background-color:#ffffff; color:#333333; font-family:Verdana; font-size:10pt">&#xa0;</span><span style="background-color:#ffffff; color:#333333; font-family:Verdana; font-size:10pt">historyserver</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">jps</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">http://</span><span style="font-family:等线; font-size:10.5pt">node104</span><span style="font-family:等线; font-size:10.5pt">:19888/jobhistory</span></p><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.6</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">单节点模式搭建</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.6.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">运行在非分布式模式，仅一个</span><span style="font-family:等线; font-size:11pt">java</span><span style="font-family:宋体; font-size:11pt">进程</span></h4><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.006.png" width="689" height="49" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.6.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">执行</span><span style="font-family:等线; font-size:11pt">mr</span><span style="font-family:宋体; font-size:11pt">后会在</span><span style="font-family:等线; font-size:11pt">output</span><span style="font-family:宋体; font-size:11pt">中生成一个</span><span style="font-family:等线; font-size:11pt">_</span><span style="font-family:等线; font-size:11pt">SUCCESS</span><span style="font-family:宋体; font-size:11pt">，这个文件的大小为</span><span style="font-family:等线; font-size:11pt">0</span><span style="font-family:宋体; font-size:11pt">，就是起个标记作用。</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.6.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">jar</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">jar</span><span style="font-family:宋体; font-size:11pt">包路径</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">输入路径</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">输出路径</span></h4><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.7</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt; font-weight:bold">pseudo</span><span style="font-family:宋体; font-size:11pt; font-weight:bold">伪分布式搭建</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.7.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:宋体; font-size:11pt">集群的搭建，要互相设置通讯，然后指明</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">，剩下的自动成为</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">，如果节点只有</span><span style="font-family:等线; font-size:11pt">1</span><span style="font-family:宋体; font-size:11pt">个，则只需要指明</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">，自动把</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">也作为一个</span><span style="font-family:等线; font-size:11pt">DN</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">副本数也只能有</span><span style="font-family:等线; font-size:11pt">1</span><span style="font-family:宋体; font-size:11pt">个，</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">在一个节点，只需要配置一个节点即可。</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.7.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">配置</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">将在</span><span style="font-family:等线; font-size:11pt">/opt/sxt/hadoop/etc/hadoop</span><span style="font-family:宋体; font-size:11pt">中将</span><span style="font-family:等线; font-size:11pt">hadoop-env.sh</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">mapred-env.sh</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">yarn-env.sh</span><span style="font-family:宋体; font-size:11pt">中的</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">JAVA_HOME</span><span style="font-family:宋体; font-size:11pt">变量改为绝对路径，而不是引用环境变量，因为远程登录时根本就不会加载</span><span style="font-family:等线; font-size:11pt">/etc/profile</span><span style="font-family:宋体; font-size:11pt">文件</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">改完这</span><span style="font-family:等线; font-size:11pt">3</span><span style="font-family:宋体; font-size:11pt">个不用</span><span style="font-family:等线; font-size:11pt">source</span><span style="font-family:宋体; font-size:11pt">，因为是管理脚本引用的，运行管理脚本时会现加载</span></h6><p style="font-size:10.5pt; line-height:150%; margin:7.8pt 0pt 7.8pt 52.5pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">Linux系统中获取JDK的安装路径：</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@ hadoop101 ~]# echo $JAVA_HOME</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">/opt/module/jdk1.8.0_144</span></p><p style="font-size:10.5pt; line-height:150%; margin:7.8pt 0pt 7.8pt 52.5pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">修改JAVA_HOME 路径：</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">export JAVA_HOME=/opt/module/jdk1.8.0_144</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">修改</span><span style="font-family:等线; font-size:11pt">core-site.xml</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">fs</span><span style="font-family:宋体; font-size:11pt">是文件系统的意思，用来配置默认的文件系统入口</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">，也就是</span><span style="color:#ff0000; font-family:等线; font-size:11pt">NN</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">的</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">节点，所有的节点都有这个配置，没配的就是</span><span style="color:#ff0000; font-family:等线; font-size:11pt">DN</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">。</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">比如本地一个文件上传时，如果是file协议，就是复制到本地文件系统。如果是hdfs，就上传到远程。执行put时，目的地的路径就会匹配hdfs的路径</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">localhost</span><span style="font-family:宋体; font-size:11pt">完全分布式时要改为在</span><span style="font-family:等线; font-size:11pt">hosts</span><span style="font-family:宋体; font-size:11pt">中配置的域名</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">设置</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">的持久化目录</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">官网文档左下角中可以看到默认配置，主要是从这里获取key的名字</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.007.png" width="384" height="272" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">在core-default</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">.xml</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">中设置了</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">hadoop.tmp.dir</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">变量，在hdfs</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">-default</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">.</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">xml</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">中，namenode的持久化目录引用了这个变量，DN的持久化目录也设置为了这个变量，也就是说NN和DN的持久化目录默认是同一个且放在/tmp下，tmp目录如果磁盘空间不足时会自动清空，所以这里算个小bug，要手动修改为非tmp的目录</span></p><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:98.85pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:376pt"><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;!-- </span><span style="font-family:宋体; font-size:10.5pt">指定</span><span style="font-family:'Courier New'; font-size:10.5pt">HDFS</span><span style="font-family:宋体; font-size:10.5pt">中</span><span style="font-family:'Courier New'; font-size:10.5pt">NameNode</span><span style="font-family:宋体; font-size:10.5pt">的地址</span><span style="font-family:宋体; font-size:10.5pt"> </span><span style="font-family:'Courier New'; font-size:10.5pt">--&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;name&gt;</span><a name="OLE_LINK1"></a><a name="OLE_LINK2"><span style="font-family:'Courier New'; font-size:10.5pt">fs.defaultFS</span><span style="-aw-bookmark-end:OLE_LINK1"></span></a><span style="font-family:'Courier New'; font-size:10.5pt">&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">    &lt;value&gt;hdfs://hadoop101:9000&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;/property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;!-- </span><span style="font-family:宋体; font-size:10.5pt">指定</span><span style="font-family:'Courier New'; font-size:10.5pt">H</span><span style="font-family:'Courier New'; font-size:10.5pt">adoop</span><span style="font-family:宋体; font-size:10.5pt">运行时产生文件的存储目录</span><span style="font-family:宋体; font-size:10.5pt"> </span><span style="font-family:'Courier New'; font-size:10.5pt">--&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;value&gt;/opt/module/hadoop-2.7.2/data/tmp&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;/property&gt;</span></p></td></tr></table><p style="font-weight:normal; line-height:10.5pt; margin:6pt 0pt 6pt 105.85pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">1st</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">dfs.namenode.name.dir</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:105pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.008.png" width="588" height="65" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-weight:normal; line-height:10.5pt; margin:0pt 0pt 0pt 105.85pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">2nd</span><span style="font:7.0pt 'Times New Roman'">&#xa0; </span><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">dfs.namenode.data.dir</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:105pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.009.png" width="572" height="44" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-weight:normal; line-height:10.5pt; margin:0pt 0pt 0pt 105.85pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">3rd</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0; </span><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">checkpoint</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:105pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.010.png" width="641" height="41" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hdfs-site.</span><span style="font-family:等线; font-size:11pt">xml </span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">设置副本数，当前是</span><span style="font-family:等线; font-size:11pt">pseudo</span><span style="font-family:宋体; font-size:11pt">，节点只有一个，所以副本设为</span><span style="font-family:等线; font-size:11pt">1</span><span style="font-family:宋体; font-size:11pt">，不然会一直发警告</span></h6><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:70.85pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:404pt"><p style="background-color:#ffffff; line-height:11pt; margin:0pt"><span style="font-family:宋体; font-size:11pt">&lt;configuration&gt;</span></p><p style="background-color:#ffffff; line-height:11pt; margin:0pt"><span style="font-family:宋体; font-size:11pt">    &lt;property&gt;</span></p><p style="background-color:#ffffff; line-height:11pt; margin:0pt"><span style="font-family:宋体; font-size:11pt">        &lt;name&gt;dfs.replication&lt;/name&gt;</span></p><p style="background-color:#ffffff; line-height:11pt; margin:0pt"><span style="font-family:宋体; font-size:11pt">        &lt;value&gt;1&lt;/value&gt;</span></p><p style="background-color:#ffffff; line-height:11pt; margin:0pt"><span style="font-family:宋体; font-size:11pt">    &lt;/property&gt;</span></p><p style="background-color:#ffffff; line-height:11pt; margin:0pt"><span style="font-family:宋体; font-size:11pt">&lt;/configuration&gt;</span></p></td></tr></table><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">设置</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">的持久化目录，也就是用来保存信息的目录，默认是</span><span style="font-family:等线; font-size:10.5pt">hadoop.tmp.dir</span><span style="font-family:宋体; font-size:10.5pt">下的</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">slaves</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">设置</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">的位置和启动信息</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#ff0000; font-family:等线; font-size:11pt">slaves</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">是群起的时候需要，如果一个一个启动</span><span style="color:#ff0000; font-family:等线; font-size:11pt">DN</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">，不需要设置</span><span style="color:#ff0000; font-family:等线; font-size:11pt">slaves</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">。只在</span><span style="color:#ff0000; font-family:等线; font-size:11pt">DN</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">里设置了</span><span style="color:#ff0000; font-family:等线; font-size:11pt">NN</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">，但</span><span style="color:#ff0000; font-family:等线; font-size:11pt">NN</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">中不是必须要设置</span><span style="color:#ff0000; font-family:等线; font-size:11pt">DN</span><span style="color:#ff0000; font-family:宋体; font-size:11pt">。</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">这里只有一个节点，只能设置一个DN，如果是真正集群，要把所有DN罗列上</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{5}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hdfs-default</span><span style="font-family:宋体; font-size:11pt">中有关于</span><span style="font-family:等线; font-size:11pt">SNN</span><span style="font-family:宋体; font-size:11pt">的远程套接字的设置</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">要在</span><span style="font-family:等线; font-size:11pt">hdfs</span><span style="font-family:等线; font-size:11pt">-site</span><span style="font-family:宋体; font-size:11pt">中覆盖</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">这个配置决定了</span><span style="font-family:等线; font-size:11pt">SNN</span><span style="font-family:宋体; font-size:11pt">的启动位置和套接字</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.011.png" width="810" height="199" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.012.png" width="531" height="194" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.7.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">至此，配置完，开始启动</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">此时，</span><span style="font-family:等线; font-size:11pt">var</span><span style="font-family:宋体; font-size:11pt">下面没有刚才设置的</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">持久化目录。</span><span style="font-family:等线; font-size:11pt">jps</span><span style="font-family:宋体; font-size:11pt">也仅有</span><span style="font-family:等线; font-size:11pt">jps</span><span style="font-family:宋体; font-size:11pt">自己本身的</span><span style="font-family:等线; font-size:11pt">ps</span><span style="font-family:宋体; font-size:11pt">查询进程</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">jps</span><span style="font-family:宋体; font-size:11pt">是</span><span style="font-family:等线; font-size:11pt">jdk</span><span style="font-family:宋体; font-size:11pt">提供的命令。</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">格式化</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">格式化前一定要清理数据，否则会出问题，如果是第一次，就不用清了</span></h6><p style="line-height:12pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:12pt">hdfs namenode -format</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">清理数据，先关进程，然后删除(dat</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">a</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">和log</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">s)</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">目录</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">这里unkown是正常的</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.013.png" width="649" height="41" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.014.png" width="1013" height="44" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">此时进入设置的持久化目录，会看到</span><span style="font-family:等线; font-size:11pt">fsimage</span><span style="font-family:宋体; font-size:11pt">文件</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.015.png" width="566" height="94" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">格式化</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">导致</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">刚连上就</span><span style="font-family:等线; font-size:11pt">kill</span><span style="font-family:宋体; font-size:11pt">自己</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">name是NN的数据，data是DN的数据，正常下里面current的VERSION里的clusterID是一样的，如果格式化NN时DN里已有clusterID，则只会更新NN的clusterID，不会更新DN的</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">如果DN发现clusterID不同，会立即杀死自己</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ </span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt">cd data/tmp/dfs/name/current/</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 current]$ cat VERSION</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt; font-weight:bold">clusterID=CID-f0330a58-36fa-4a2a-a65f-2688269b5837</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">format</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ cd data/tmp/dfs/data/current/</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt; font-weight:bold">clusterID=CID-f0330a58-36fa-4a2a-a65f-2688269b5837</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">格式化</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">NameNode</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">，</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">会产生新的集群id</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">，</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">导致</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">NameNode和</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">DataNode的集群id不一致，集群</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">找</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">不到已</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">往</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">数据。</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">所以</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">，格式NameNode时，一定要先删除</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">DN</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">数据和log</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">日志</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">，然后再格式化NameNode。</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(4)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">DN的数据跟NN的数据在各自节点上都是相同的路径(hdf-site.xml的配置中引用了相同的core-site.</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">xml</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">的变量</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">)</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">，VERSION存在data目录中。</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">使用管理脚本来启动角色进程</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">start-dfs.sh</span><span style="font-family:宋体; font-size:11pt">或</span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:等线; font-size:11pt">-daemon.sh start namenode  </span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:等线; font-size:11pt">-daemon.sh start datanode</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">群起命令必须配</span><span style="font-family:等线; font-size:11pt">slaves</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">因为没设置</span><span style="font-family:等线; font-size:11pt">ssh</span><span style="font-family:宋体; font-size:11pt">免登陆，所以这里要求输入密码</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.016.png" width="821" height="193" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">可以看到这里提示</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">SNN</span><span style="font-family:宋体; font-size:11pt">都启动了，此时输入</span><span style="font-family:等线; font-size:11pt">jps</span><span style="font-family:宋体; font-size:11pt">，可以看到角色进程</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.017.png" width="322" height="76" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">设置好免密码登录后</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.018.png" width="943" height="189" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[5]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">此时，在设置的持久化目录</span><span style="font-family:等线; font-size:11pt">/</span><span style="font-family:等线; font-size:11pt">var/bd/hadoop/local</span><span style="font-family:宋体; font-size:11pt">中，可以看到多了几个文件夹</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:94.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.019.png" width="478" height="151" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">name和ns都是被角色使用的，如果是全分布式，就只会有一个，因为一个节点只有一个角色。</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">此时查看data</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">(DN)</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">和name</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">(NN)</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">里面的VERSION中的clusterID，会发现一样。</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 105.85pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">1st</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">一开始只有NN有，DN启动时根据配文找到NN，NN给DN这个标识，表明是在同一个集群中</span><span style="color:#262626; font-family:'等线 Light'; font-size:10.5pt">。</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">DN的VERSION是在第一次连接到NN后创建的</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 105.85pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">2nd</span><span style="font:7.0pt 'Times New Roman'">&#xa0; </span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">格式化命令只会格式化NN，DN</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">不受影响</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">，如果NN发生误操作格式化了自己，DN连接到NN时，发现clusterID不一致，DN会杀死自己。如果启动后发现DN消失了</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">，</span><span style="color:#ff0000; font-family:'等线 Light'; font-size:11pt">有可能就是clusterID出问题。</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">关闭，重启</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">stop-dfs.sh</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">重新执行</span><span style="font-family:等线; font-size:11pt">start-dfs.sh</span></h6><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.7.4</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">pseudo</span><span style="font-family:宋体; font-size:11pt">配置</span><span style="font-family:等线; font-size:11pt">yarn</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">yarn-env.sh</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">export JAVA_HOME=/opt/module/jdk1.8.0_144</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">yarn-site.xml</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:404pt"><p style="line-height:14pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:14pt">&lt;!-- Reducer获取数据的方式 --&gt;</span></p><p style="line-height:14pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:14pt">&lt;property&gt;</span></p><p style="line-height:14pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:14pt"> </span><span style="width:17.17pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:14pt">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span></p><p style="line-height:14pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:14pt"> </span><span style="width:17.17pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:14pt">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span></p><p style="line-height:14pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:14pt">&lt;/property&gt;</span></p><p style="line-height:14pt; margin:0pt"><span style="font-family:等线; font-size:14pt">&lt;!-- 指定YARN的ResourceManager的地址 --&gt;</span></p><p style="line-height:14pt; margin:0pt"><span style="font-family:等线; font-size:14pt">&lt;property&gt;</span></p><p style="line-height:14pt; margin:0pt; text-indent:36.75pt"><span style="font-family:等线; font-size:14pt">&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span></p><p style="line-height:14pt; margin:0pt; text-indent:36.75pt"><span style="font-family:等线; font-size:14pt">&lt;value&gt;</span><span style="font-family:等线; font-size:14pt">node03</span><span style="font-family:等线; font-size:14pt">&lt;/value&gt;</span></p><p style="line-height:14pt; margin:0pt"><span style="font-family:等线; font-size:14pt">&lt;/property&gt;</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">mapred-env.sh</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">export JAVA_HOME=/opt/module/jdk1.8.0_144</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">(</span><span style="font-family:宋体; font-size:11pt">对</span><span style="font-family:等线; font-size:11pt">mapred-site.xml.template</span><span style="font-family:宋体; font-size:11pt">重新命名为</span><span style="font-family:等线; font-size:11pt">) mapred-site.xml</span></h5><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:11pt">[</span><span style="font-family:'Courier New'; font-size:11pt">dc</span><span style="font-family:'Courier New'; font-size:11pt">@hadoop101 hadoop]$ mv mapred-site.xml.template mapred-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:11pt">[</span><span style="font-family:'Courier New'; font-size:11pt">dc</span><span style="font-family:'Courier New'; font-size:11pt">@hadoop101 hadoop]$ vi mapred-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:11pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><a name="OLE_LINK10"></a><a name="OLE_LINK11"></a><a name="OLE_LINK47"><span style="font-family:'Courier New'; font-size:11pt">&lt;!-- </span><span style="font-family:宋体; font-size:11pt">指定</span><span style="font-family:'Courier New'; font-size:11pt">MR</span><span style="font-family:宋体; font-size:11pt">运行在</span><span style="font-family:'Courier New'; font-size:11pt">YARN</span><span style="font-family:宋体; font-size:11pt">上</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:'Courier New'; font-size:11pt">--&gt;</span></a></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:11pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="width:10.5pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:11pt">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="width:10.5pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:11pt">&lt;value&gt;yarn&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:11pt">&lt;/property&gt;</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{5}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="-aw-bookmark-end:OLE_LINK10"></span><span style="-aw-bookmark-end:OLE_LINK11"></span><span style="-aw-bookmark-end:OLE_LINK47"></span><span style="font-family:宋体; font-size:11pt">启动集群</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">启动前必须保证</span><span style="font-family:等线; font-size:11pt">NameNode</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">DataNode</span><span style="font-family:宋体; font-size:11pt">已经启动</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">启动</span><span style="font-family:等线; font-size:11pt">ResourceManager</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop-2.7.2]$ sbin/yarn-daemon.sh start resourcemanager</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">启动</span><span style="font-family:等线; font-size:11pt">NodeManager</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop-2.7.2]$ sbin/yarn-daemon.sh start nodemanager</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{6}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">集群操作</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">http://hadoop101:8088/cluster</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt"> </span><span style="font-family:等线; font-size:10.5pt">              </span><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.020.png" width="554" height="135" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">删除文件系统上的</span><span style="font-family:等线; font-size:11pt">output</span><span style="font-family:宋体; font-size:11pt">文件</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop-2.7.2]$ bin/hdfs dfs -rm -R /user/dc/output</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">执行</span><span style="font-family:等线; font-size:11pt">MapReduce</span><span style="font-family:宋体; font-size:11pt">程序</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop-2.7.2]$ bin/hadoop jar</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt"> </span><span style="width:18.12pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:等线; font-size:10.5pt">share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.2.jar wordcount /user/dc/input  /user/dc/output</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">查看运行结果，如图</span><span style="font-family:等线; font-size:11pt">2-36</span><span style="font-family:宋体; font-size:11pt">所示</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop-2.7.2]$ bin/hdfs dfs -cat /user/dc/output/*</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.021.png" width="554" height="101" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.7.5</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">配置历史服务器</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">配置</span><span style="font-family:等线; font-size:11pt">mapred-site.xml</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop]$ vi mapred-site.xml</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在该文件里面增加如下配置。</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">&lt;!-- 历史服务器端地址 --&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">&lt;property&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">&lt;value&gt;hadoop101:10020&lt;/value&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">&lt;/property&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">&lt;!-- 历史服务器web端地址 --&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">&lt;property&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">    &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">    &lt;value&gt;hadoop101:19888&lt;/value&gt;</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">&lt;/property&gt;</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">启动历史服务器</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop-2.7.2]$ sbin/mr-jobhistory-daemon.sh start historyserver</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">查看历史服务器是否启动</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop-2.7.2]$ jps</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{5}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">查看</span><span style="font-family:等线; font-size:11pt">JobHistory</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><a style="color:#0563c1" href="http://hadoop101:19888/jobhistory"><span style="color:#0563c1; font-family:等线; font-size:10.5pt; text-decoration:underline">http://hadoop101:19888/jobhistory</span></a></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.022.png" width="533" height="153" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.7.6</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">日志聚集</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">日志聚集概念：应用运行完成以后，将程序运行日志信息上传到</span><span style="font-family:等线; font-size:11pt">HDFS</span><span style="font-family:宋体; font-size:11pt">系统上。</span><span style="font-family:宋体; font-size:11pt">可以方便的查看到程序运行详情，方便开发调试。</span><span style="font-family:宋体; font-size:11pt">也可以去</span><span style="font-family:等线; font-size:11pt">logs</span><span style="font-family:宋体; font-size:11pt">目录查看</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">开启日志聚集功能，需要重新启动</span><span style="font-family:等线; font-size:11pt">NodeManager </span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">ResourceManager</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">HistoryManager</span><span style="font-family:宋体; font-size:11pt">。</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">usage</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">配置</span><span style="font-family:等线; font-size:11pt">yarn-site.xml</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[dc@hadoop101 hadoop]$ vi yarn-site.xml</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">在该文件里面增加如下配置。</span></h6><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;!-- 日志聚集功能使能 --&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;property&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;value&gt;true&lt;/value&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;/property&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&#xa0;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;!-- 日志保留时间设置7天 --&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;property&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;value&gt;604800&lt;/value&gt;</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">&lt;/property&gt;</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">关闭</span><span style="font-family:等线; font-size:11pt">NodeManager </span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">ResourceManager</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">HistoryManager</span></h6><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ sbin/yarn-daemon.sh stop resourcemanager</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ sbin/yarn-daemon.sh stop nodemanager</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ sbin/mr-jobhistory-daemon.sh stop historyserver</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">启动</span><span style="font-family:等线; font-size:11pt">NodeManager </span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">ResourceManager</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">HistoryManager</span></h6><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ sbin/yarn-daemon.sh start resourcemanager</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ sbin/yarn-daemon.sh start nodemanager</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ </span><a name="OLE_LINK41"></a><a name="OLE_LINK42"><span style="font-family:'Courier New'; font-size:10.5pt">sbin/mr-jobhistory-daemon.sh start historyserver</span><span style="-aw-bookmark-end:OLE_LINK41"></span></a></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[5]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">删除</span><span style="font-family:等线; font-size:11pt">HDFS</span><span style="font-family:宋体; font-size:11pt">上已经存在的</span><span style="font-family:宋体; font-size:11pt">输出</span><span style="font-family:宋体; font-size:11pt">文件</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">[</span><span style="font-family:等线; font-size:10.5pt">dc</span><span style="font-family:等线; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ bin/hdfs dfs -rm -R /user/</span><span style="font-family:等线; font-size:10.5pt">dc</span><span style="font-family:等线; font-size:10.5pt">/output</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[6]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">执行</span><span style="font-family:等线; font-size:11pt">WordCount</span><span style="font-family:宋体; font-size:11pt">程序</span></h6><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 32pt; orphans:0; text-align:justify; text-indent:42pt; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop101 hadoop-2.7.2]$ hadoop jar</span><span style="font-family:'Courier New'; font-size:10.5pt"> </span><span style="font-family:'Courier New'; font-size:10.5pt"> share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.2.jar wordcount /user/</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">/input /user/</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">/output</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.023.png" width="554" height="256" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /><span style="font-family:等线; font-size:10.5pt">  </span><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.024.png" width="554" height="253" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.7.7</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">summary</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">准备工作</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">ssh</span><span style="font-family:宋体; font-size:11pt">免密码，</span><span style="font-family:等线; font-size:11pt">ssh</span><span style="font-family:宋体; font-size:11pt">远程登录免密码</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">jdk</span><span style="font-family:宋体; font-size:11pt">的安装和环境变量配置</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">安装</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">env</span><span style="font-family:宋体; font-size:11pt">的环境变量设置为绝对路径</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">文件夹</span><span style="font-family:等线; font-size:11pt">/etc/hadoop</span><span style="font-family:宋体; font-size:11pt">中配置文件环境变量的配置</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{5}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">core</span><span style="font-family:宋体; font-size:11pt">、</span><span style="font-family:等线; font-size:11pt">hdfs</span><span style="font-family:宋体; font-size:11pt">、</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{6}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">格式化</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">要注意什么？</span></h5><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.8</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">完全分布式</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.8.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">src</span></h4><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.8.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">propaedeutics</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">scp</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">syntax</span></h6><p style="line-height:12pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:12pt">scp</span><span style="font-family:等线; font-size:12pt"> </span><span style="font-family:等线; font-size:12pt">-r</span><span style="font-family:等线; font-size:12pt"> </span><span style="font-family:等线; font-size:12pt">源 目的地</span></p><p style="line-height:12pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:12pt">如果</span><span style="font-family:等线; font-size:12pt">源</span><span style="font-family:等线; font-size:12pt">和目的地不是本机，</span><span style="font-family:等线; font-size:12pt">用以下形式表示：用户@主机名colon路径</span></p><p style="line-height:12pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:12pt">可以在源主机</span><span style="font-family:等线; font-size:12pt">、</span><span style="font-family:等线; font-size:12pt">目标主机</span><span style="font-family:等线; font-size:12pt">、第三方</span><span style="font-family:等线; font-size:12pt">执行</span><span style="font-family:等线; font-size:12pt">，只要指定源和目标即可</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">rsync</span><span style="font-family:宋体; font-size:11pt">远程同步工具</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">rsync</span><span style="font-family:宋体; font-size:11pt">主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点。</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">rsync</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">scp</span><span style="font-family:宋体; font-size:11pt">区别：用</span><span style="font-family:等线; font-size:11pt">rsync</span><span style="font-family:宋体; font-size:11pt">做文件的复制要比</span><span style="font-family:等线; font-size:11pt">scp</span><span style="font-family:宋体; font-size:11pt">的速度快，</span><span style="font-family:等线; font-size:11pt">rsync</span><span style="font-family:宋体; font-size:11pt">只对差异文件做更新。</span><span style="font-family:等线; font-size:11pt">scp</span><span style="font-family:宋体; font-size:11pt">是把所有文件都复制过去。</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">syntax</span></h6><p style="line-height:14pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:14pt">rsync </span><span style="font-family:等线; font-size:14pt">   </span><span style="font-family:等线; font-size:14pt">-rvl     </span><span style="font-family:等线; font-size:14pt">  </span><span style="font-family:等线; font-size:14pt">$pdir/$fname         </span><span style="font-family:等线; font-size:14pt">     </span><span style="font-family:等线; font-size:14pt">$user@hadoop$host:$pdir/$fname</span></p><p style="line-height:14pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:14pt">命令 </span><span style="font-family:等线; font-size:14pt">  </span><span style="font-family:等线; font-size:14pt">选项参数 </span><span style="font-family:等线; font-size:14pt">  </span><span style="font-family:等线; font-size:14pt">要拷贝的文件路径/名称   </span><span style="font-family:等线; font-size:14pt"> </span><span style="font-family:等线; font-size:14pt">目的用户@主机:目的路径/名称</span></p><p style="font-weight:normal; line-height:12pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:12pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:12pt">参数</span></p><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:87.95pt; width:381.05pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.4pt; padding-right:5.03pt; vertical-align:top; width:166.8pt"><p style="line-height:14pt; margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:14pt; vertical-align:4pt">选项</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.4pt; vertical-align:top; width:192.65pt"><p style="line-height:14pt; margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:14pt; vertical-align:4pt">功能</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.4pt; padding-right:5.03pt; vertical-align:top; width:166.8pt"><p style="line-height:14pt; margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:14pt; vertical-align:4pt">-r</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.4pt; vertical-align:top; width:192.65pt"><p style="line-height:14pt; margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:14pt; vertical-align:4pt">递归</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.4pt; padding-right:5.03pt; vertical-align:top; width:166.8pt"><p style="line-height:14pt; margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:14pt; vertical-align:4pt">-v</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.4pt; vertical-align:top; width:192.65pt"><p style="line-height:14pt; margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:14pt; vertical-align:4pt">显示复制过程</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.4pt; padding-right:5.03pt; vertical-align:top; width:166.8pt"><p style="line-height:14pt; margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:Calibri; font-size:14pt; vertical-align:4pt">-l</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.4pt; vertical-align:top; width:192.65pt"><p style="line-height:14pt; margin:0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:14pt; vertical-align:4pt">拷贝符号连接</span></p></td></tr></table><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">脚本</span></h6><p style="font-weight:normal; line-height:11pt; margin:6pt 0pt 6pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">在脚本中执行rsync命令，</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">一定不要把文件命名为rsync，会导致死循环</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">勿忘设置权限</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">如果有100个节点，不能每个都手动操作</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(4)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">在哪个路径执行都行，因为已经放到usr/local/bin下或者path下</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(5)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">执行时要输入要同步的文件的名称即可，不用写绝对路径。因为</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">dirname</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">命令会根据输入的文件名获取文件的路径</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">#!/bin/bash</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">#1 </span><span style="font-family:宋体; font-size:12pt">获取输入参数个数，如果没有参数，直接退出</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">pcount=$#</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">if((pcount==0)); then</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">echo no args;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">exit;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">fi</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">#2 </span><span style="font-family:宋体; font-size:12pt">获取文件名称</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">p1=$1</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">fname=`basename $p1`</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">echo fname=$fname</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">#3 </span><span style="font-family:宋体; font-size:12pt">获取上级目录到绝对路径</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">pdir=`cd -P $(dirname $p1); pwd`</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">echo pdir=$pdir</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">#4 </span><span style="font-family:宋体; font-size:12pt">获取当前用户名称</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">user=`whoami`</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">#5 </span><span style="font-family:宋体; font-size:12pt">循环</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">for((host=10</span><span style="font-family:'Courier New'; font-size:12pt">1</span><span style="font-family:'Courier New'; font-size:12pt">; host&lt;1</span><span style="font-family:'Courier New'; font-size:12pt">10</span><span style="font-family:'Courier New'; font-size:12pt">; host++)); do</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">        echo ------------------- hadoop$host --------------</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">        rsync -rvl $pdir/$fname $user@</span><span style="font-family:'Courier New'; font-size:12pt">node</span><span style="font-family:'Courier New'; font-size:12pt">$host:$pdir</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:0pt 0pt 0pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">done</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">SSH</span><span style="font-family:宋体; font-size:11pt">无密连接</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">公钥、私钥能互相解加密的数据。但公公、私私不行。</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">私钥加密，公钥解密，公钥加密，私钥解密</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">A==</span><span style="font-family:宋体; font-size:11pt">》</span><span style="font-family:等线; font-size:11pt">B</span><span style="font-family:宋体; font-size:11pt">想要免密，要把</span><span style="font-family:等线; font-size:11pt">A</span><span style="font-family:宋体; font-size:11pt">的公钥复制到</span><span style="font-family:等线; font-size:11pt">B</span><span style="font-family:宋体; font-size:11pt">中</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.025.png" width="477" height="273" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:105.95pt"><tr style="height:41.6pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:159.3pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">known_hosts</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:208.9pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">记录ssh访问过计算机的公钥(public key)</span></p></td></tr><tr style="height:28.15pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:159.3pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">id_rsa</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:208.9pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">生成的私钥</span></p></td></tr><tr style="height:27.5pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:159.3pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">id_rsa.pub</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:208.9pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">生成的公钥</span></p></td></tr><tr style="height:27.5pt"><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:159.3pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">authorized_keys</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:208.9pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">存放授权过得无密登录服务器公钥</span></p></td></tr></table><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">生成公私钥，保存在在用户</span><span style="font-family:等线; font-size:11pt">/</span><span style="font-family:宋体; font-size:11pt">当前用户下</span></h6><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:11pt">ssh-keygen -t rsa</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[5]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">将公钥拷贝到要免密登录的目标机器上</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">ssh-copy-id </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">节点，把当前节点公钥复制到参数节点的</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">authorized_keys</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 .ssh]$ ssh-copy-id </span><span style="font-family:'Courier New'; font-size:10.5pt">node</span><span style="font-family:'Courier New'; font-size:10.5pt">102</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 .ssh]$ ssh-copy-id </span><span style="font-family:'Courier New'; font-size:10.5pt">node</span><span style="font-family:'Courier New'; font-size:10.5pt">10</span><span style="font-family:'Courier New'; font-size:10.5pt">3</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt 7.8pt 94.5pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 .ssh]$ ssh-copy-id </span><span style="font-family:'Courier New'; font-size:10.5pt">node</span><span style="font-family:'Courier New'; font-size:10.5pt">10</span><span style="font-family:'Courier New'; font-size:10.5pt">4</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[6]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">note</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">还需要在</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">NN</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">节点和RM节点</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">上采用root账号，配置一下无密登录到</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">node</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">102、</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">node</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">103、</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">node</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">104；</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">还需要在node</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">103上采用</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">dc</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">账号配置一下无密登录到</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">node</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">102、</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">node</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">103、</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">node</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">104服务器上。</span></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.8.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">节点规划</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">SNN</span><span style="font-family:宋体; font-size:11pt">不能在同一个，</span><span style="font-family:等线; font-size:11pt">RM</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">也不能在同一个，原因是因为都比较耗内存，不能放在一起</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">node105</span><span style="font-family:宋体; font-size:11pt">备用</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:70.5pt"><tr><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:1.65pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">&#xa0;</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">1</span><span style="font-family:等线; font-size:10.5pt; font-weight:bold">01</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">10</span><span style="font-family:等线; font-size:10.5pt; font-weight:bold">2</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">103</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">104</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">105</span></p></td></tr><tr><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:1.65pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">N</span><span style="font-family:等线; font-size:10.5pt; font-weight:bold">N</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td></tr><tr><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:1.65pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">D</span><span style="font-family:等线; font-size:10.5pt; font-weight:bold">N</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td></tr><tr><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:1.65pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">RM</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td><td style="background-color:#f2f2f2; border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td></tr><tr><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:1.65pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt; font-weight:bold">NM</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.15pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">√</span></p></td><td style="border-bottom-color:#bfbfbf; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#bfbfbf; border-left-style:solid; border-left-width:0.75pt; border-right-color:#bfbfbf; border-right-style:solid; border-right-width:0.75pt; border-top-color:#bfbfbf; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:72.2pt"><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></td></tr></table><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.8.4</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">安装</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在节点上安装</span><span style="font-family:等线; font-size:11pt">jdk</span><span style="font-family:宋体; font-size:11pt">，</span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:宋体; font-size:11pt">，环境变量。配置</span><span style="font-family:等线; font-size:11pt">/etc/profile</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:宋体; font-size:11pt">中</span><span style="font-family:等线; font-size:11pt">3</span><span style="font-family:宋体; font-size:11pt">个</span><span style="font-family:等线; font-size:11pt">env</span><span style="font-family:宋体; font-size:11pt">的</span><span style="font-family:等线; font-size:11pt">JAVA_HOME</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">手动在还没安装</span><span style="font-family:等线; font-size:11pt">hadoop</span><span style="font-family:宋体; font-size:11pt">的节点上设置</span><span style="font-family:等线; font-size:11pt">/</span><span style="font-family:等线; font-size:11pt">opt/bd/</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">进入所有节点</span><span style="font-family:等线; font-size:11pt">hadopp</span><span style="font-family:宋体; font-size:11pt">共同根目录</span><span style="font-family:等线; font-size:11pt">/opt/bd</span><span style="font-family:宋体; font-size:11pt">，执行</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">scp -r ./hadoop-2.6.5/ node003:`pwd`</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">&amp;&amp;</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">scp -r ./hadoop-2.6.5/ node00</span><span style="font-family:等线; font-size:11pt">4</span><span style="font-family:等线; font-size:11pt">:`pwd`</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.8.5</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">配置，跟</span><span style="font-family:等线; font-size:11pt">pseudo</span><span style="font-family:宋体; font-size:11pt">有重复的地方，此处是完整的</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hadoop-env.sh</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">core-site.xml</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:422.2pt"><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">[</span><span style="font-family:'Courier New'; font-size:12pt">dc</span><span style="font-family:'Courier New'; font-size:12pt">@hadoop102 hadoop]$ vi core-site.xml</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:12pt">在该</span><span style="font-family:宋体; font-size:12pt">文件中</span><span style="font-family:宋体; font-size:12pt">编写</span><span style="font-family:宋体; font-size:12pt">如下配置</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&lt;!-- </span><span style="font-family:宋体; font-size:12pt">指定</span><span style="font-family:'Courier New'; font-size:12pt">HDFS</span><span style="font-family:宋体; font-size:12pt">中</span><span style="font-family:'Courier New'; font-size:12pt">NameNode</span><span style="font-family:宋体; font-size:12pt">的地址</span><span style="font-family:宋体; font-size:12pt"> </span><span style="font-family:'Courier New'; font-size:12pt">--&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:12pt">&lt;name&gt;fs.defaultFS&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">      &lt;value&gt;hdfs://</span><span style="color:#ff0000; font-family:'Courier New'; font-size:12pt">hadoop102</span><span style="font-family:'Courier New'; font-size:12pt">:9000&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&lt;/property&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&lt;!-- </span><span style="font-family:宋体; font-size:12pt">指定</span><span style="font-family:'Courier New'; font-size:12pt">H</span><span style="font-family:'Courier New'; font-size:12pt">adoop</span><span style="font-family:宋体; font-size:12pt">运行时产生文件的存储目录</span><span style="font-family:宋体; font-size:12pt"> </span><span style="font-family:'Courier New'; font-size:12pt">--&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:12pt">&lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:12pt">&lt;value&gt;/opt/module/hadoop-2.7.2/data/tmp&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:12pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:12pt">&lt;/property&gt;</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hdfs-site</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">SSN</span><span style="font-family:宋体; font-size:11pt">的配置注释</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">副本数量改为</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">，只要不超过节点数量就行，设</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">是因为一共</span><span style="font-family:等线; font-size:11pt">3</span><span style="font-family:宋体; font-size:11pt">个</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">节点，便于观察</span><span style="font-family:等线; font-size:11pt">block</span></h6><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:404pt"><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">配置</span><span style="font-family:'Courier New'; font-size:10.5pt">hadoop-env.sh</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 hadoop]$ vi hadoop-env.sh</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">export JAVA_HOME=/opt/module/jdk1.8.0_144</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">配置</span><span style="font-family:'Courier New'; font-size:10.5pt">hdfs-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 hadoop]$ vi hdfs-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">在该</span><span style="font-family:宋体; font-size:10.5pt">文件中</span><span style="font-family:宋体; font-size:10.5pt">编写</span><span style="font-family:宋体; font-size:10.5pt">如下配置</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;name&gt;dfs.replication&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;value&gt;3&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;/property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">&lt;!-- </span><span style="color:#ff0000; font-family:宋体; font-size:10.5pt; text-decoration:line-through">指定</span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">H</span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">adoop</span><span style="color:#ff0000; font-family:宋体; font-size:10.5pt; text-decoration:line-through">辅助名称</span><span style="color:#ff0000; font-family:宋体; font-size:10.5pt; text-decoration:line-through">节点</span><span style="color:#ff0000; font-family:宋体; font-size:10.5pt; text-decoration:line-through">主机</span><span style="color:#ff0000; font-family:宋体; font-size:10.5pt; text-decoration:line-through">配置</span><span style="color:#ff0000; font-family:宋体; font-size:10.5pt; text-decoration:line-through"> </span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">--&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">      &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">      &lt;value&gt;node</span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">04</span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">:50090&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt; text-decoration:line-through">&lt;/property&gt;</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">slaves</span><span style="font-family:宋体; font-size:11pt">中设置</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">的主机名，为了群起脚本</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">start-dfs.sh</span><span style="font-family:宋体; font-size:11pt">中</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.026.png" width="478" height="163" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">注意不能有空格</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">node102</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">node103</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">node104</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{5}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">YARN</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:404pt"><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">配置</span><span style="font-family:'Courier New'; font-size:10.5pt">yarn-env.sh</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 hadoop]$ vi yarn-env.sh</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">export JAVA_HOME=/opt/module/jdk1.8.0_144</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">配置</span><span style="font-family:'Courier New'; font-size:10.5pt">yarn-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 hadoop]$ vi yarn-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">在该</span><span style="font-family:宋体; font-size:10.5pt">文件中增加如下配置</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;!-- </span><span style="font-family:'Courier New'; font-size:10.5pt">R</span><span style="font-family:'Courier New'; font-size:10.5pt">educer</span><span style="font-family:宋体; font-size:10.5pt">获取数据的方式</span><span style="font-family:宋体; font-size:10.5pt"> </span><span style="font-family:'Courier New'; font-size:10.5pt">--&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;/property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;!-- </span><span style="font-family:宋体; font-size:10.5pt">指定</span><span style="font-family:'Courier New'; font-size:10.5pt">YARN</span><span style="font-family:宋体; font-size:10.5pt">的</span><span style="font-family:'Courier New'; font-size:10.5pt">ResourceManager</span><span style="font-family:宋体; font-size:10.5pt">的地址</span><span style="font-family:宋体; font-size:10.5pt"> </span><span style="font-family:'Courier New'; font-size:10.5pt">--&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;value&gt;</span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt">node</span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt">1</span><span style="color:#ff0000; font-family:'Courier New'; font-size:10.5pt">03</span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;/property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;!--日志聚集功能开启--&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">    &lt;value&gt;true&lt;/value&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;/property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&#xa0;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;!--日志保留时间设置，需把时间换成秒--&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;property&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">    &lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">    &lt;value&gt;604800&lt;/value&gt;</span></p><p style="line-height:12pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">&lt;/property&gt;</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{6}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">m</span><span style="font-family:等线; font-size:11pt">apreduce</span></h5><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:84pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:656.1pt"><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">配置</span><span style="font-family:'Courier New'; font-size:10.5pt">mapred-env.sh</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 hadoop]$ vi mapred-env.sh</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">export JAVA_HOME=/opt/module/jdk1.8.0_144</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">配置</span><span style="font-family:'Courier New'; font-size:10.5pt">mapred-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 hadoop]$ cp mapred-site.xml.template mapred-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&#xa0;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">[</span><span style="font-family:'Courier New'; font-size:10.5pt">dc</span><span style="font-family:'Courier New'; font-size:10.5pt">@hadoop102 hadoop]$ vi mapred-site.xml</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:宋体; font-size:10.5pt">在该</span><span style="font-family:宋体; font-size:10.5pt">文件中增加如下配置</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;!-- </span><span style="font-family:宋体; font-size:10.5pt">指定</span><span style="font-family:'Courier New'; font-size:10.5pt">MR</span><span style="font-family:宋体; font-size:10.5pt">运行在</span><span style="font-family:'Courier New'; font-size:10.5pt">Y</span><span style="font-family:'Courier New'; font-size:10.5pt">arn</span><span style="font-family:宋体; font-size:10.5pt">上</span><span style="font-family:宋体; font-size:10.5pt"> </span><span style="font-family:'Courier New'; font-size:10.5pt">--&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;property&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="font-family:'Courier New'; font-size:10.5pt">&lt;value&gt;yarn&lt;/value&gt;</span></p><p style="background-color:#e0e0e0; line-height:11pt; margin:7.8pt 0pt; orphans:0; text-align:justify; widows:0"><span style="font-family:'Courier New'; font-size:10.5pt">&lt;/property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;!-- 历史服务器的rpc通讯地址 --&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;value&gt;node10</span><span style="color:#ff0000; font-family:等线; font-size:11pt">4</span><span style="color:#ff0000; font-family:等线; font-size:11pt">:10020&lt;/value&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;/property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;!-- 历史服务器的web地址 --&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;property&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="width:21pt; text-indent:0pt; display:inline-block"></span><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;value&gt;node10</span><span style="color:#ff0000; font-family:等线; font-size:11pt">4</span><span style="color:#ff0000; font-family:等线; font-size:11pt">:19888&lt;/value&gt;</span></p><p style="line-height:11pt; margin:0pt"><span style="color:#ff0000; font-family:等线; font-size:11pt">&lt;/property&gt;</span></p></td></tr></table><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{7}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">分发</span></h5><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">在集群上分发配置好的Hadoop配置文件</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">[</span><span style="font-family:等线; font-size:11pt">dc</span><span style="font-family:等线; font-size:11pt">@hadoop102 hadoop]$ xsync /opt/module/hadoop-2.7.2/</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">查看文件分发情况</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:11pt">[</span><span style="font-family:等线; font-size:11pt">dc</span><span style="font-family:等线; font-size:11pt">@hadoop103 hadoop]$ cat /opt/module/hadoop-2.7.2/etc/hadoop/core-site.xml</span></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.8.6</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">启动</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">在</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">节点上格式化</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">hdfs namenode -format</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">格式化和启动是分开的</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.027.png" width="975" height="70" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">此时在持久化目录中会发现跟</span><span style="font-family:等线; font-size:11pt">pseudo</span><span style="font-family:宋体; font-size:11pt">不同，只有一个</span><span style="font-family:等线; font-size:11pt">name</span><span style="font-family:宋体; font-size:11pt">文件夹，这是因为</span><span style="font-family:等线; font-size:11pt">NN</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">分开了，</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">的数据在</span><span style="font-family:等线; font-size:11pt">DN</span><span style="font-family:宋体; font-size:11pt">自己的节点上的</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">hdfs</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">一个一个启动</span><span style="font-family:等线; font-size:11pt">hdfs</span><span style="font-family:宋体; font-size:11pt">的角色</span></h6><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt"><span style="font-family:等线; font-size:11pt">hadoop-daemon.sh start namenode</span></p><p style="line-height:11pt; margin:7.8pt 0pt 7.8pt 73.5pt"><span style="font-family:等线; font-size:11pt">hadoop-daemon.sh start datanode</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">实际场景不可能一个一个启动。</span><span style="font-family:等线; font-size:11pt">start-dfs.sh</span><span style="font-family:宋体; font-size:11pt">，启动</span><span style="font-family:等线; font-size:11pt">hdfs</span><span style="font-family:宋体; font-size:11pt">所有角色</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.028.png" width="844" height="134" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">yarn</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">在</span><span style="font-family:等线; font-size:11pt">RM</span><span style="font-family:宋体; font-size:11pt">节点上</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">start-yarn.shj</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{4}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">start-all</span><span style="font-family:宋体; font-size:11pt">和</span><span style="font-family:等线; font-size:11pt">stop-all</span><span style="font-family:宋体; font-size:11pt">官方不建议使用</span></h5><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.9</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">操作</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.9.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">可以访问</span><span style="font-family:等线; font-size:11pt">node101</span><span style="font-family:等线; font-size:11pt">:50070</span><span style="font-family:宋体; font-size:11pt">来进入</span><span style="font-family:等线; font-size:11pt">GUI</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">首页下方的</span><span style="font-family:等线; font-size:11pt">Live</span><span style="font-family:等线; font-size:11pt"> Nodes </span><span style="font-family:宋体; font-size:11pt">可以显示活动的</span><span style="font-family:等线; font-size:11pt">DN</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:52.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.029.png" width="747" height="98" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">访问</span><span style="font-family:等线; font-size:11pt">SNN</span><span style="font-family:宋体; font-size:11pt">的</span><span style="font-family:等线; font-size:11pt">web</span></h5><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 42pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">http://hadoop104:50090</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">块的分布和偏移量</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">在最上面的块下拉框中可以选块</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">点</span><span style="font-family:等线; font-size:11pt">download</span><span style="font-family:宋体; font-size:11pt">下载的是整个文件</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:73.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.030.png" width="334" height="326" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.9.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">命令行操作</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">使用</span><span style="font-family:等线; font-size:11pt">hdfs</span><span style="font-family:宋体; font-size:11pt">命令创建文件夹</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">必须以</span><span style="font-family:等线; font-size:11pt">hdfs</span><span style="font-family:等线; font-size:11pt">  </span><span style="font-family:等线; font-size:11pt">dfs</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">开头</span></h6><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">命令基本跟</span><span style="font-family:等线; font-size:11pt">linux</span><span style="font-family:宋体; font-size:11pt">一样</span></h6><table cellspacing="0" cellpadding="0" style="border-collapse:collapse; margin-left:70.85pt"><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:196.6pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">mkdir</span><span style="font-family:等线; font-size:11pt">  </span><span style="font-family:等线; font-size:11pt">-p</span><span style="font-family:等线; font-size:11pt"> </span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:196.6pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">&#xa0;</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:196.6pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">put</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">上传文件 上传位置</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:196.6pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">&#xa0;</span></p></td></tr><tr><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:196.6pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">&#xa0;</span></p></td><td style="border-bottom-color:#000000; border-bottom-style:solid; border-bottom-width:0.75pt; border-left-color:#000000; border-left-style:solid; border-left-width:0.75pt; border-right-color:#000000; border-right-style:solid; border-right-width:0.75pt; border-top-color:#000000; border-top-style:solid; border-top-width:0.75pt; padding-left:5.03pt; padding-right:5.03pt; vertical-align:top; width:196.6pt"><p style="line-height:11pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:11pt">&#xa0;</span></p></td></tr></table><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">linux</span><span style="font-family:宋体; font-size:11pt">中</span><span style="font-family:等线; font-size:11pt">/home</span><span style="font-family:宋体; font-size:11pt">放用户文件夹，</span><span style="font-family:等线; font-size:11pt">hdfs</span><span style="font-family:宋体; font-size:11pt">中用</span><span style="font-family:等线; font-size:11pt">/user</span><span style="font-family:宋体; font-size:11pt">，不过</span><span style="font-family:等线; font-size:11pt">user</span><span style="font-family:宋体; font-size:11pt">需要自己创建，比如创建了一个</span><span style="font-family:等线; font-size:11pt">/user/root</span><span style="font-family:宋体; font-size:11pt">，则客户端以</span><span style="font-family:等线; font-size:11pt">root</span><span style="font-family:宋体; font-size:11pt">登录时，这个目录就称为</span><span style="font-family:等线; font-size:11pt">root</span><span style="font-family:宋体; font-size:11pt">用户的家目录</span></h6><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">put</span><span style="font-family:宋体; font-size:11pt">上传文件</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">put</span><span style="font-family:等线; font-size:11pt">  </span><span style="font-family:宋体; font-size:11pt">上传的文件</span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt"> </span><span style="font-family:宋体; font-size:11pt">位置</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">上传过程中出现COPING，上传结束后刷新就没有了</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.031.png" width="644" height="84" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">下图显示的就是元信息，</span><span style="font-family:等线; font-size:11pt">Block</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">Size</span><span style="font-family:宋体; font-size:11pt">就是默认的块大小，</span><span style="font-family:等线; font-size:11pt">Replication</span><span style="font-family:宋体; font-size:11pt">就是副本数量，</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:63pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.032.png" width="734" height="142" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">点击</span><span style="font-family:等线; font-size:11pt">Name</span><span style="font-family:宋体; font-size:11pt">列，会显示分块的信息</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">这个文件176M，默认块是128M，所以分成了2块，</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Avaliability就是位置信息</span></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">Size是实际占用的物理空间，Block0是128，Block1就成了40多了</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:105pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.033.png" width="297" height="273" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.034.png" width="303" height="273" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{3}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">分块后文件的情况</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">创建一个文本文件，</span><span style="font-family:等线; font-size:11pt">for i in `seq 100000`;do echo "hello world $i" &gt;&gt; test.txt; done</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">&gt;&gt; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">是追加</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:等线; font-size:11pt">ll</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">-h</span><span style="font-family:宋体; font-size:11pt">后发现大小为</span><span style="font-family:等线; font-size:11pt">1.6M</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:84pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.035.png" width="491" height="129" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">上传，但设置块大小为</span><span style="font-family:等线; font-size:11pt">1MB</span><span style="font-family:宋体; font-size:11pt">，即使</span><span style="font-family:等线; font-size:11pt">1.6</span><span style="font-family:宋体; font-size:11pt">也分为了</span><span style="font-family:等线; font-size:11pt">2</span><span style="font-family:宋体; font-size:11pt">块</span></h6><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(1)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">输入hdfs</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">dfs，可以查看帮助列表，通过 -D</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">&lt;</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">k=v</span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">&gt; </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">来设置hdfs的参数</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:94.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.036.png" width="453" height="46" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(2)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">在文档中查看kv</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:94.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.037.png" width="570" height="210" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(3)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">上传</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 115.5pt"><span style="font-family:等线; font-size:10.5pt">-D</span><span style="font-family:等线; font-size:10.5pt"> </span><span style="font-family:等线; font-size:10.5pt">p=v</span><span style="font-family:等线; font-size:10.5pt"> </span><span style="font-family:等线; font-size:10.5pt">-put</span><span style="font-family:等线; font-size:10.5pt">  </span><span style="font-family:等线; font-size:10.5pt">test.txt</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 115.5pt"><span style="font-family:等线; font-size:10.5pt">这里的dfs.blocksize必须是字节，1m的字节数是1024</span><span style="font-family:等线; font-size:10.5pt"> </span><span style="font-family:等线; font-size:10.5pt">X</span><span style="font-family:等线; font-size:10.5pt"> </span><span style="font-family:等线; font-size:10.5pt">1024</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:94.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.038.png" width="507" height="21" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 91.65pt; page-break-after:avoid; page-break-inside:avoid; text-indent:0pt"><span style="font-family:'等线 Light'; font-size:11pt">(4)</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="color:#1f3864; font-family:'等线 Light'; font-size:11pt">上传完，在DN的持久化目录可以看到上传的文件</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:94.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.039.png" width="801" height="204" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 94.5pt"><span style="font-family:等线; font-size:10.5pt">一共2个文件，包括之前上传的那个hadoop的安装文件，一个文件2个block，一个block2个文件，一共8个文件，因为每个block旁边都有一个块的元数据文件来记录其md5值，用来唯一标识</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 94.5pt"><span style="font-family:等线; font-size:10.5pt">打开一个块的文件，会发现第一个block到字母e，刚好1M，所以就从这切割了</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:115.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.040.png" width="172" height="158" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:115.5pt"><span style="font-family:等线; font-size:10.5pt">后面的文件起始为llo</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:115.5pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.041.png" width="191" height="70" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><p style="line-height:12pt; margin:7.8pt 0pt 7.8pt 94.5pt; text-indent:10.5pt"><span style="color:#ff0000; font-family:等线; font-size:12pt">在切割的时候不会考虑数据的完整性，因为数据太复杂，无法在这统计规范，要在计算层对数据进行处理后再计算</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.10</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">定时任务</span></h3><h3 style="margin:0pt 0pt 6pt 34.95pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt; font-style:normal">1.11</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt; font-weight:bold">时间同步</span></h3><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.11.1</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">src</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">找一个机器，作为时间服务器，所有的机器与这台集群时间进行定时的同步，比如，每隔十分钟，同步一次时间。</span><span style="font-family:宋体; font-size:11pt">关闭从网络获取时间，只从本地的硬件时间获取，这样即使断网也能时间同步。</span></h5><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">ntp</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">nerwork</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">time</span><span style="font-family:等线; font-size:11pt"> </span><span style="font-family:等线; font-size:11pt">protocol</span></h5><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.11.2</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">comprehending</span></h4><p style="line-height:10.5pt; margin:7.8pt 0pt; text-indent:63pt"><img src="428662f4-f86a-45a2-889b-58fe4e8032d4.042.png" width="770" height="398" alt="" style="-aw-left-pos:0pt; -aw-rel-hpos:column; -aw-rel-vpos:paragraph; -aw-top-pos:0pt; -aw-wrap-type:inline" /></p><h4 style="font-weight:normal; margin:0pt 0pt 6pt 49.15pt; text-indent:0pt"><span style="display:inline; font-family:等线; font-size:11pt; font-style:normal; font-variant:normal; text-decoration:none; text-transform:none; vertical-align:baseline">1.11.3</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:等线; font-size:11pt">usage</span></h4><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{1}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">时间服务器配置（必须</span><span style="font-family:等线; font-size:11pt">root</span><span style="font-family:宋体; font-size:11pt">用户）</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">检查</span><span style="font-family:等线; font-size:11pt">ntp</span><span style="font-family:宋体; font-size:11pt">是否安装</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">rpm -qa|grep ntp</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">ntp-4.2.6p5-10.el6.centos.x86_64</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">fontpackages-filesystem-1.41-1.1.el6.noarch</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">ntpdate-4.2.6p5-10.el6.centos.x86_64</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">修改</span><span style="font-family:等线; font-size:11pt">ntp</span><span style="font-family:宋体; font-size:11pt">配置文件</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">vi /etc/ntp.conf</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">修改内容如下</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">a）修改1（授权192.168.1.0-192.168.1.255网段上的所有机器可以从这台机器上查询和同步时间）</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">解开注释</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap为</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">b）修改2（集群在局域网中，不使用其他互联网上的时间）</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">注释下面的语句</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">#server 0.centos.pool.ntp.org iburst</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">#server 1.centos.pool.ntp.org iburst</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">#server 2.centos.pool.ntp.org iburst</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">#server 3.centos.pool.ntp.org iburst</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">c）添加3（当该节点丢失网络连接，依然可以采用本地时间作为时间服务器为集群中的其他节点提供时间同步）</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">server 127.127.1.0</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">fudge 127.127.1.0 stratum 10</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">修改</span><span style="font-family:等线; font-size:11pt">/etc/sysconfig/ntpd </span><span style="font-family:宋体; font-size:11pt">文件</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">vim /etc/sysconfig/ntpd</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">增加内容如下（让硬件时间与系统时间一起同步）</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">SYNC_HWCLOCK=yes</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[4]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">重新启动</span><span style="font-family:等线; font-size:11pt">ntpd</span><span style="font-family:宋体; font-size:11pt">服务</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">service ntpd status</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">ntpd 已停</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">service ntpd start</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">正在启动</span><span style="font-family:等线; font-size:10.5pt"> ntpd：                            </span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[5]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">设置</span><span style="font-family:等线; font-size:11pt">ntpd</span><span style="font-family:宋体; font-size:11pt">服务开机启动</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">chkconfig ntpd on</span></p><h5 style="font-weight:normal; line-height:11pt; margin:0pt 0pt 0pt 63.3pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">{2}</span><span style="font:7.0pt 'Times New Roman'">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:宋体; font-size:11pt">其他机器配置（必须</span><span style="font-family:等线; font-size:11pt">root</span><span style="font-family:宋体; font-size:11pt">用户）</span></h5><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[1]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">在其他机器配置</span><span style="font-family:等线; font-size:11pt">10</span><span style="font-family:宋体; font-size:11pt">分钟与时间服务器同步一次</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">crontab -e</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">编写定时任务如下：</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 84pt"><span style="font-family:等线; font-size:10.5pt">*/10 * * * * /usr/sbin/ntpdate hadoop102</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[2]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">修改任意机器时间</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">date -s "2017-9-11 11:11:11"</span></p><h6 style="font-weight:normal; margin:0pt 0pt 0pt 70.9pt; text-indent:0pt"><span style="font-family:等线; font-size:11pt">[3]</span><span style="font:7.0pt 'Times New Roman'"> </span><span style="font-family:宋体; font-size:11pt">十分钟后查看机器是否与时间服务器同步</span></h6><p style="line-height:10.5pt; margin:7.8pt 0pt 7.8pt 63pt; text-indent:21pt"><span style="font-family:等线; font-size:10.5pt">date</span></p><p style="line-height:10.5pt; margin:7.8pt 0pt"><span style="font-family:等线; font-size:10.5pt">&#xa0;</span></p></div></body></html>